2025-08-06 20:38:59,104 p=16607 u=root n=ansible INFO| web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.0.2.15 port 22: Connection refused",
    "unreachable": true
}
2025-08-06 20:38:59,106 p=16607 u=root n=ansible INFO| web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.0.2.15 port 22: Connection refused",
    "unreachable": true
}
2025-08-06 20:46:15,628 p=16802 u=root n=ansible INFO| web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.0.2.15 port 22: Connection refused",
    "unreachable": true
}
2025-08-06 20:46:15,642 p=16802 u=root n=ansible INFO| web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ssh: connect to host 10.0.2.15 port 22: Connection refused",
    "unreachable": true
}
2025-08-06 20:48:03,625 p=17997 u=root n=ansible INFO| web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: Warning: Permanently added '10.0.2.15' (ED25519) to the list of known hosts.\r\naanalizz@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:48:03,626 p=17997 u=root n=ansible INFO| web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: Warning: Permanently added '10.0.2.15' (ED25519) to the list of known hosts.\r\nubuntu@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:52:40,363 p=18268 u=root n=ansible INFO| web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: ubuntu@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:52:40,490 p=18268 u=root n=ansible INFO| web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: aanalizz@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:53:12,747 p=18286 u=root n=ansible INFO| web2 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: aanalizz@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:53:12,750 p=18286 u=root n=ansible INFO| web1 | UNREACHABLE! => {
    "changed": false,
    "msg": "Failed to connect to the host via ssh: aanalizz@10.0.2.15: Permission denied (publickey,password).",
    "unreachable": true
}
2025-08-06 20:56:21,094 p=18670 u=root n=ansible INFO| web2 | FAILED! => {
    "msg": "Missing sudo password"
}
2025-08-06 20:56:21,095 p=18670 u=root n=ansible INFO| web1 | FAILED! => {
    "msg": "Missing sudo password"
}
2025-08-06 21:00:47,315 p=18985 u=root n=ansible INFO| web1 | FAILED! => {
    "msg": "Missing sudo password"
}
2025-08-06 21:00:47,333 p=18985 u=root n=ansible INFO| web2 | FAILED! => {
    "msg": "Missing sudo password"
}
2025-08-06 21:01:54,226 p=19132 u=root n=ansible WARNING| [WARNING]: Platform linux on host web2 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 21:01:54,227 p=19132 u=root n=ansible INFO| web2 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-08-06 21:01:54,490 p=19132 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 21:01:54,491 p=19132 u=root n=ansible INFO| web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-08-06 21:04:19,827 p=19283 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 21:04:19,828 p=19283 u=root n=ansible INFO| web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-08-06 21:28:44,746 p=19577 u=root n=ansible ERROR| ERROR! the playbook: playbooks/site.yml could not be found
2025-08-06 22:47:34,607 p=3831 u=root n=ansible INFO| playbook: playbooks/site.yml
2025-08-06 22:47:54,849 p=3838 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 22:47:54,852 p=3838 u=root n=ansible INFO| web1 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3.12"
    },
    "changed": false,
    "ping": "pong"
}
2025-08-06 22:48:15,120 p=3936 u=root n=ansible INFO| {
    "_meta": {
        "hostvars": {
            "web1": {
                "admin_email": "admin@empresa.com",
                "admin_users": [
                    {
                        "comment": "Usuario DevOps",
                        "groups": "sudo",
                        "name": "devops",
                        "shell": "/bin/bash"
                    }
                ],
                "ansible_host": "10.0.2.15",
                "ansible_user": "analiz",
                "company_name": "SFI Networks",
                "deployment_date": "{{ ansible_date_time.date }}",
                "document_root": "/var/www/html",
                "environment_name": "laboratorio",
                "firewall_enabled": true,
                "http_port": 80,
                "https_port": 443,
                "log_retention_days": 30,
                "nginx_access_log": "/var/log/nginx/access.log",
                "nginx_client_max_body_size": "10M",
                "nginx_error_log": "/var/log/nginx/error.log",
                "nginx_keepalive_timeout": 65,
                "nginx_log_level": "warn",
                "nginx_service_enabled": true,
                "nginx_service_state": "started",
                "nginx_user": "www-data",
                "nginx_version": "latest",
                "nginx_worker_connections": 1024,
                "nginx_worker_processes": 2,
                "ntp_enabled": true,
                "ntp_timezone": "{{ timezone }}",
                "server_id": 1,
                "ssh_port": 22,
                "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
                "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
                "ssl_enabled": false,
                "system_packages": [
                    "curl",
                    "wget",
                    "unzip",
                    "vim",
                    "htop",
                    "tree"
                ],
                "timezone": "America/Lima",
                "virtual_hosts": [
                    {
                        "document_root": "{{ document_root }}",
                        "index_files": "index.html index.htm",
                        "name": "default",
                        "server_name": "{{ ansible_default_ipv4.address }}"
                    },
                    {
                        "document_root": "/var/www/empresa",
                        "index_files": "index.html",
                        "name": "empresa",
                        "server_name": "empresa.local"
                    }
                ],
                "website_title": "Servidor Nginx - {{ environment_name }}"
            }
        }
    },
    "all": {
        "children": [
            "ungrouped",
            "webservers",
            "testing"
        ]
    },
    "testing": {
        "hosts": [
            "web1"
        ]
    },
    "webservers": {
        "hosts": [
            "web1"
        ]
    }
}
2025-08-06 22:48:33,230 p=3940 u=root n=ansible INFO| {
    "admin_email": "admin@empresa.com",
    "admin_users": [
        {
            "comment": "Usuario DevOps",
            "groups": "sudo",
            "name": "devops",
            "shell": "/bin/bash"
        }
    ],
    "ansible_host": "10.0.2.15",
    "ansible_user": "analiz",
    "company_name": "SFI Networks",
    "deployment_date": "{{ ansible_date_time.date }}",
    "document_root": "/var/www/html",
    "environment_name": "laboratorio",
    "firewall_enabled": true,
    "http_port": 80,
    "https_port": 443,
    "log_retention_days": 30,
    "nginx_access_log": "/var/log/nginx/access.log",
    "nginx_client_max_body_size": "10M",
    "nginx_error_log": "/var/log/nginx/error.log",
    "nginx_keepalive_timeout": 65,
    "nginx_log_level": "warn",
    "nginx_service_enabled": true,
    "nginx_service_state": "started",
    "nginx_user": "www-data",
    "nginx_version": "latest",
    "nginx_worker_connections": 1024,
    "nginx_worker_processes": 2,
    "ntp_enabled": true,
    "ntp_timezone": "{{ timezone }}",
    "server_id": 1,
    "ssh_port": 22,
    "ssl_certificate_key_path": "/etc/ssl/private/nginx.key",
    "ssl_certificate_path": "/etc/ssl/certs/nginx.crt",
    "ssl_enabled": false,
    "system_packages": [
        "curl",
        "wget",
        "unzip",
        "vim",
        "htop",
        "tree"
    ],
    "timezone": "America/Lima",
    "virtual_hosts": [
        {
            "document_root": "{{ document_root }}",
            "index_files": "index.html index.htm",
            "name": "default",
            "server_name": "{{ ansible_default_ipv4.address }}"
        },
        {
            "document_root": "/var/www/empresa",
            "index_files": "index.html",
            "name": "empresa",
            "server_name": "empresa.local"
        }
    ],
    "website_title": "Servidor Nginx - {{ environment_name }}"
}
2025-08-06 22:49:00,061 p=3950 u=root n=ansible INFO| PLAY [LABORATORIO: Instalación y configuración completa de Nginx] **********************************************************************************************************************
2025-08-06 22:49:00,247 p=3950 u=root n=ansible INFO| TASK [Gathering Facts] *****************************************************************************************************************************************************************
2025-08-06 22:49:06,330 p=3950 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 22:49:06,331 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:06,362 p=3950 u=root n=ansible INFO| TASK [Preparación: Mostrar información inicial] ****************************************************************************************************************************************
2025-08-06 22:49:06,563 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-08-06 22:49:06,599 p=3950 u=root n=ansible INFO| TASK [Preparación: Actualizar cache de paquetes] ***************************************************************************************************************************************
2025-08-06 22:49:12,777 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:49:12,894 p=3950 u=root n=ansible INFO| TASK [Debug: Verificar variables cargadas] *********************************************************************************************************************************************
2025-08-06 22:49:13,194 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-08-06 22:49:13,238 p=3950 u=root n=ansible INFO| TASK [Sistema: Configurar timezone] ****************************************************************************************************************************************************
2025-08-06 22:49:13,476 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:49:13,523 p=3950 u=root n=ansible INFO| TASK [Sistema: Instalar paquetes del sistema] ******************************************************************************************************************************************
2025-08-06 22:49:24,979 p=3950 u=root n=ansible INFO| The following additional packages will be installed:
  vim-runtime
Suggested packages:
  lm-sensors ctags vim-doc vim-scripts
The following NEW packages will be installed:
  htop vim vim-runtime
0 upgraded, 3 newly installed, 0 to remove and 38 not upgraded.
2025-08-06 22:49:24,994 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:49:25,060 p=3950 u=root n=ansible INFO| TASK [Sistema: Crear usuario administrativo] *******************************************************************************************************************************************
2025-08-06 22:49:26,722 p=3950 u=root n=ansible INFO| changed: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-08-06 22:49:26,753 p=3950 u=root n=ansible INFO| TASK [Nginx: Instalar nginx] ***********************************************************************************************************************************************************
2025-08-06 22:49:29,182 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:29,255 p=3950 u=root n=ansible INFO| TASK [Nginx: Verificar instalación] ****************************************************************************************************************************************************
2025-08-06 22:49:30,486 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:49:30,515 p=3950 u=root n=ansible INFO| TASK [Nginx: Mostrar versión instalada] ************************************************************************************************************************************************
2025-08-06 22:49:30,642 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Nginx instalado: "
}
2025-08-06 22:49:30,740 p=3950 u=root n=ansible INFO| TASK [Sistema: Configurar logrotate básico] ********************************************************************************************************************************************
2025-08-06 22:49:32,832 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:32,861 p=3950 u=root n=ansible INFO| TASK [Red: Configurar UFW si está habilitado] ******************************************************************************************************************************************
2025-08-06 22:49:35,143 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:35,178 p=3950 u=root n=ansible INFO| TASK [Verificación: Estado del servicio nginx] *****************************************************************************************************************************************
2025-08-06 22:49:37,633 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:37,655 p=3950 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx está escuchando] *******************************************************************************************************************************
2025-08-06 22:49:40,116 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:49:40,145 p=3950 u=root n=ansible INFO| TASK [Info: Mostrar resumen de instalación] ********************************************************************************************************************************************
2025-08-06 22:49:40,356 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINSTALACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nNginx Version: \nEstado: Instalado y funcionando\nPuerto: 80 activo\nPróximo paso: Configuración\n=====================================\n"
}
2025-08-06 22:49:40,396 p=3950 u=root n=ansible INFO| TASK [Config: Crear directorios para virtual hosts] ************************************************************************************************************************************
2025-08-06 22:49:42,345 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-available"
 }


2025-08-06 22:49:42,372 p=3950 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-available)
2025-08-06 22:49:43,541 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-enabled"
 }


2025-08-06 22:49:43,549 p=3950 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-enabled)
2025-08-06 22:49:44,642 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/conf.d"
 }


2025-08-06 22:49:44,645 p=3950 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/conf.d)
2025-08-06 22:49:44,678 p=3950 u=root n=ansible INFO| TASK [Config: Crear directorios de documentos web] *************************************************************************************************************************************
2025-08-06 22:49:45,964 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/var/www/html"
 }


2025-08-06 22:49:45,973 p=3950 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 22:49:46,868 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/www/empresa",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-08-06 22:49:46,875 p=3950 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 22:49:46,913 p=3950 u=root n=ansible INFO| TASK [Config: Desplegar configuración principal de nginx] ******************************************************************************************************************************
2025-08-06 22:49:51,038 p=3950 u=root n=ansible INFO| [0;31m--- before: /etc/nginx/nginx.conf[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-3950tt0it5zq/tmpi6ftd0gl/nginx.conf.j2[0m
[0;32m[0m[0;36m@@ -1,83 +1,59 @@[0m
[0;36m[0m[0;32m+# templates/nginx.conf.j2 - Configuración principal de Nginx[0m
[0;32m[0m[0;32m+# Generado automáticamente por Ansible - NO EDITAR MANUALMENTE[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m user www-data;
[0;31m-worker_processes auto;[0m
[0;31m[0m[0;32m+worker_processes 2;[0m
[0;32m[0m pid /run/nginx.pid;
[0;31m-error_log /var/log/nginx/error.log;[0m
[0;31m[0m[0;31m-include /etc/nginx/modules-enabled/*.conf;[0m
[0;31m[0m 
[0;32m+# CONFIGURACIÓN DE EVENTOS[0m
[0;32m[0m events {
[0;31m-	worker_connections 768;[0m
[0;31m[0m[0;31m-	# multi_accept on;[0m
[0;31m[0m[0;32m+    worker_connections 1024;[0m
[0;32m[0m[0;32m+    use epoll;                             [0m
[0;32m[0m[0;32m+    multi_accept on;                       [0m
[0;32m[0m }
 
[0;32m+# CONFIGURACIÓN HTTP[0m
[0;32m[0m http {
[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Basic Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	sendfile on;[0m
[0;31m[0m[0;31m-	tcp_nopush on;[0m
[0;31m[0m[0;31m-	types_hash_max_size 2048;[0m
[0;31m[0m[0;31m-	# server_tokens off;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# server_names_hash_bucket_size 64;[0m
[0;31m[0m[0;31m-	# server_name_in_redirect off;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	include /etc/nginx/mime.types;[0m
[0;31m[0m[0;31m-	default_type application/octet-stream;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# SSL Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE[0m
[0;31m[0m[0;31m-	ssl_prefer_server_ciphers on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Logging Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	access_log /var/log/nginx/access.log;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Gzip Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	gzip on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# gzip_vary on;[0m
[0;31m[0m[0;31m-	# gzip_proxied any;[0m
[0;31m[0m[0;31m-	# gzip_comp_level 6;[0m
[0;31m[0m[0;31m-	# gzip_buffers 16 8k;[0m
[0;31m[0m[0;31m-	# gzip_http_version 1.1;[0m
[0;31m[0m[0;31m-	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Virtual Host Configs[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	include /etc/nginx/conf.d/*.conf;[0m
[0;31m[0m[0;31m-	include /etc/nginx/sites-enabled/*;[0m
[0;31m[0m[0;31m-}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-#mail {[0m
[0;31m[0m[0;31m-#	# See sample authentication script at:[0m
[0;31m[0m[0;31m-#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	# auth_http localhost/auth.php;[0m
[0;31m[0m[0;31m-#	# pop3_capabilities "TOP" "USER";[0m
[0;31m[0m[0;31m-#	# imap_capabilities "IMAP4rev1" "UIDPLUS";[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:110;[0m
[0;31m[0m[0;31m-#		protocol   pop3;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:143;[0m
[0;31m[0m[0;31m-#		protocol   imap;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#}[0m
[0;31m[0m[0;32m+    # CONFIGURACIÓN BÁSICA[0m
[0;32m[0m[0;32m+    sendfile on;                           [0m
[0;32m[0m[0;32m+    tcp_nopush on;                         [0m
[0;32m[0m[0;32m+    tcp_nodelay on;                        [0m
[0;32m[0m[0;32m+    keepalive_timeout 65;[0m
[0;32m[0m[0;32m+    types_hash_max_size 2048;              [0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE TAMAÑOS[0m
[0;32m[0m[0;32m+    client_max_body_size 10M;[0m
[0;32m[0m[0;32m+    client_body_buffer_size 128k;[0m
[0;32m[0m[0;32m+    client_header_buffer_size 1k;[0m
[0;32m[0m[0;32m+    large_client_header_buffers 4 4k;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # TIPOS MIME[0m
[0;32m[0m[0;32m+    include /etc/nginx/mime.types;[0m
[0;32m[0m[0;32m+    default_type application/octet-stream;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGGING[0m
[0;32m[0m[0;32m+    log_format main '$remote_addr - $remote_user [$time_local] "$request" '[0m
[0;32m[0m[0;32m+                    '$status $body_bytes_sent "$http_referer" '[0m
[0;32m[0m[0;32m+                    '"$http_user_agent" "$http_x_forwarded_for"';[0m
[0;32m[0m[0;32m+                    [0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE COMPRESIÓN[0m
[0;32m[0m[0;32m+    gzip on;[0m
[0;32m[0m[0;32m+    gzip_vary on;[0m
[0;32m[0m[0;32m+    gzip_proxied any;[0m
[0;32m[0m[0;32m+    gzip_comp_level 6;[0m
[0;32m[0m[0;32m+    gzip_types[0m
[0;32m[0m[0;32m+        text/plain[0m
[0;32m[0m[0;32m+        text/css[0m
[0;32m[0m[0;32m+        text/xml[0m
[0;32m[0m[0;32m+        text/javascript[0m
[0;32m[0m[0;32m+        application/javascript[0m
[0;32m[0m[0;32m+        application/xml+rss[0m
[0;32m[0m[0;32m+        application/json;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    # INCLUIR CONFIGURACIONES ADICIONALES[0m
[0;32m[0m[0;32m+    include /etc/nginx/conf.d/*.conf;[0m
[0;32m[0m[0;32m+    include /etc/nginx/sites-enabled/*;[0m
[0;32m[0m

2025-08-06 22:49:51,039 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:49:51,070 p=3950 u=root n=ansible INFO| TASK [Config: Desplegar configuración de virtual hosts] ********************************************************************************************************************************
2025-08-06 22:49:53,699 p=3950 u=root n=ansible INFO| [0;31m--- before: /etc/nginx/sites-available/default[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-3950tt0it5zq/tmp9pv57ovq/default-site.j2[0m
[0;32m[0m[0;36m@@ -1,91 +1,80 @@[0m
[0;36m[0m[0;31m-##[0m
[0;31m[0m[0;31m-# You should look at the following URL's in order to grasp a solid understanding[0m
[0;31m[0m[0;31m-# of Nginx configuration files in order to fully unleash the power of Nginx.[0m
[0;31m[0m[0;31m-# https://www.nginx.com/resources/wiki/start/[0m
[0;31m[0m[0;31m-# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/[0m
[0;31m[0m[0;31m-# https://wiki.debian.org/Nginx/DirectoryStructure[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# In most cases, administrators will remove this file from sites-enabled/ and[0m
[0;31m[0m[0;31m-# leave it as reference inside of sites-available where it will continue to be[0m
[0;31m[0m[0;31m-# updated by the nginx packaging team.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# This file will automatically load configuration files provided by other[0m
[0;31m[0m[0;31m-# applications, such as Drupal or Wordpress. These applications will be made[0m
[0;31m[0m[0;31m-# available underneath a path with that package name, such as /drupal8.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.[0m
[0;31m[0m[0;31m-##[0m
[0;31m[0m[0;32m+# templates/default-site.j2 - Configuración del sitio por defecto[0m
[0;32m[0m 
[0;31m-# Default server configuration[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;32m+# VIRTUAL HOST: default[0m
[0;32m[0m server {
[0;31m-	listen 80 default_server;[0m
[0;31m[0m[0;31m-	listen [::]:80 default_server;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# SSL configuration[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# listen 443 ssl default_server;[0m
[0;31m[0m[0;31m-	# listen [::]:443 ssl default_server;[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Note: You should disable gzip for SSL traffic.[0m
[0;31m[0m[0;31m-	# See: https://bugs.debian.org/773332[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Read up on ssl_ciphers to ensure a secure configuration.[0m
[0;31m[0m[0;31m-	# See: https://bugs.debian.org/765782[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Self signed certs generated by the ssl-cert package[0m
[0;31m[0m[0;31m-	# Don't use them in a production server![0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# include snippets/snakeoil.conf;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	root /var/www/html;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# Add index.php to the list if you are using PHP[0m
[0;31m[0m[0;31m-	index index.html index.htm index.nginx-debian.html;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	server_name _;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	location / {[0m
[0;31m[0m[0;31m-		# First attempt to serve request as file, then[0m
[0;31m[0m[0;31m-		# as directory, then fall back to displaying a 404.[0m
[0;31m[0m[0;31m-		try_files $uri $uri/ =404;[0m
[0;31m[0m[0;31m-	}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# pass PHP scripts to FastCGI server[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#location ~ \.php$ {[0m
[0;31m[0m[0;31m-	#	include snippets/fastcgi-php.conf;[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#	# With php-fpm (or other unix sockets):[0m
[0;31m[0m[0;31m-	#	fastcgi_pass unix:/run/php/php7.4-fpm.sock;[0m
[0;31m[0m[0;31m-	#	# With php-cgi (or other tcp sockets):[0m
[0;31m[0m[0;31m-	#	fastcgi_pass 127.0.0.1:9000;[0m
[0;31m[0m[0;31m-	#}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# deny access to .htaccess files, if Apache's document root[0m
[0;31m[0m[0;31m-	# concurs with nginx's one[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#location ~ /\.ht {[0m
[0;31m[0m[0;31m-	#	deny all;[0m
[0;31m[0m[0;31m-	#}[0m
[0;31m[0m[0;31m-}[0m
[0;31m[0m[0;32m+    listen 80;[0m
[0;32m[0m[0;32m+        server_name 10.0.2.15 localhost;[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    root /var/www/html;[0m
[0;32m[0m[0;32m+    index index.html index.htm;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGS ESPECÍFICOS[0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/default_access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/default_error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE UBICACIONES[0m
[0;32m[0m[0;32m+    location / {[0m
[0;32m[0m[0;32m+        try_files $uri $uri/ =404;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # MANEJAR ARCHIVOS ESTÁTICOS[0m
[0;32m[0m[0;32m+    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {[0m
[0;32m[0m[0;32m+        expires 1y;[0m
[0;32m[0m[0;32m+        add_header Cache-Control "public, immutable";[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # OCULTAR INFORMACIÓN SENSIBLE[0m
[0;32m[0m[0;32m+    location ~ /\.ht {[0m
[0;32m[0m[0;32m+        deny all;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # PÁGINA DE ERROR PERSONALIZADA[0m
[0;32m[0m[0;32m+    error_page 404 /404.html;[0m
[0;32m[0m[0;32m+    error_page 500 502 503 504 /50x.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    location = /50x.html {[0m
[0;32m[0m[0;32m+        root /usr/share/nginx/html;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m 
 
[0;31m-# Virtual Host configuration for example.com[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# You can move that to a different file under sites-available/ and symlink that[0m
[0;31m[0m[0;31m-# to sites-enabled/ to enable it.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#server {[0m
[0;31m[0m[0;31m-#	listen 80;[0m
[0;31m[0m[0;31m-#	listen [::]:80;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server_name example.com;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	root /var/www/example.com;[0m
[0;31m[0m[0;31m-#	index index.html;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	location / {[0m
[0;31m[0m[0;31m-#		try_files $uri $uri/ =404;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#}[0m
[0;31m[0m[0;32m+# VIRTUAL HOST: empresa[0m
[0;32m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+    listen 80;[0m
[0;32m[0m[0;32m+        server_name empresa.local;[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    root /var/www/empresa;[0m
[0;32m[0m[0;32m+    index index.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGS ESPECÍFICOS[0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/empresa_access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/empresa_error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE UBICACIONES[0m
[0;32m[0m[0;32m+    location / {[0m
[0;32m[0m[0;32m+        try_files $uri $uri/ =404;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # MANEJAR ARCHIVOS ESTÁTICOS[0m
[0;32m[0m[0;32m+    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {[0m
[0;32m[0m[0;32m+        expires 1y;[0m
[0;32m[0m[0;32m+        add_header Cache-Control "public, immutable";[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # OCULTAR INFORMACIÓN SENSIBLE[0m
[0;32m[0m[0;32m+    location ~ /\.ht {[0m
[0;32m[0m[0;32m+        deny all;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # PÁGINA DE ERROR PERSONALIZADA[0m
[0;32m[0m[0;32m+    error_page 404 /404.html;[0m
[0;32m[0m[0;32m+    error_page 500 502 503 504 /50x.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    location = /50x.html {[0m
[0;32m[0m[0;32m+        root /usr/share/nginx/html;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 22:49:53,700 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:49:53,718 p=3950 u=root n=ansible INFO| TASK [Config: Eliminar configuración original por defecto] *****************************************************************************************************************************
2025-08-06 22:49:54,584 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/etc/nginx/sites-enabled/default",
[0;31m-    "state": "link"[0m
[0;31m[0m[0;32m+    "state": "absent"[0m
[0;32m[0m }


2025-08-06 22:49:54,587 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:49:54,607 p=3950 u=root n=ansible INFO| TASK [Config: Habilitar sitio personalizado] *******************************************************************************************************************************************
2025-08-06 22:49:55,184 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:49:55,199 p=3950 u=root n=ansible INFO| TASK [Config: Desplegar páginas de inicio personalizadas] ******************************************************************************************************************************
2025-08-06 22:49:57,776 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-3950tt0it5zq/tmpu0mcgct8/index.html.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,111 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="es">[0m
[0;32m[0m[0;32m+<head>[0m
[0;32m[0m[0;32m+    <meta charset="UTF-8">[0m
[0;32m[0m[0;32m+    <meta name="viewport" content="width=device-width, initial-scale=1.0">[0m
[0;32m[0m[0;32m+    <title>Servidor Nginx - laboratorio</title>[0m
[0;32m[0m[0;32m+    <style>[0m
[0;32m[0m[0;32m+        body {[0m
[0;32m[0m[0;32m+            font-family: Arial, sans-serif;[0m
[0;32m[0m[0;32m+            line-height: 1.6;[0m
[0;32m[0m[0;32m+            margin: 0;[0m
[0;32m[0m[0;32m+            padding: 0;[0m
[0;32m[0m[0;32m+            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            min-height: 100vh;[0m
[0;32m[0m[0;32m+            display: flex;[0m
[0;32m[0m[0;32m+            align-items: center;[0m
[0;32m[0m[0;32m+            justify-content: center;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .container {[0m
[0;32m[0m[0;32m+            text-align: center;[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.1);[0m
[0;32m[0m[0;32m+            padding: 2rem;[0m
[0;32m[0m[0;32m+            border-radius: 10px;[0m
[0;32m[0m[0;32m+            backdrop-filter: blur(10px);[0m
[0;32m[0m[0;32m+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[0m
[0;32m[0m[0;32m+            max-width: 600px;[0m
[0;32m[0m[0;32m+            margin: 0 auto;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        h1 {[0m
[0;32m[0m[0;32m+            font-size: 2.5rem;[0m
[0;32m[0m[0;32m+            margin-bottom: 1rem;[0m
[0;32m[0m[0;32m+            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-grid {[0m
[0;32m[0m[0;32m+            display: grid;[0m
[0;32m[0m[0;32m+            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));[0m
[0;32m[0m[0;32m+            gap: 1rem;[0m
[0;32m[0m[0;32m+            margin: 2rem 0;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card {[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.2);[0m
[0;32m[0m[0;32m+            padding: 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 8px;[0m
[0;32m[0m[0;32m+            border: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card h3 {[0m
[0;32m[0m[0;32m+            margin: 0 0 0.5rem 0;[0m
[0;32m[0m[0;32m+            color: #FFD700;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .status {[0m
[0;32m[0m[0;32m+            background: #28a745;[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            padding: 0.5rem 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 20px;[0m
[0;32m[0m[0;32m+            display: inline-block;[0m
[0;32m[0m[0;32m+            margin: 1rem 0;[0m
[0;32m[0m[0;32m+            font-weight: bold;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .footer {[0m
[0;32m[0m[0;32m+            margin-top: 2rem;[0m
[0;32m[0m[0;32m+            padding-top: 1rem;[0m
[0;32m[0m[0;32m+            border-top: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+            font-size: 0.9rem;[0m
[0;32m[0m[0;32m+            opacity: 0.8;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    </style>[0m
[0;32m[0m[0;32m+</head>[0m
[0;32m[0m[0;32m+<body>[0m
[0;32m[0m[0;32m+    <div class="container">[0m
[0;32m[0m[0;32m+        <h1>Servidor Nginx - laboratorio</h1>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="status">[0m
[0;32m[0m[0;32m+            Nginx configurado exitosamente[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="info-grid">[0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Servidor</h3>[0m
[0;32m[0m[0;32m+                <p>aanalizz</p>[0m
[0;32m[0m[0;32m+                <p>10.0.2.15</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Sistema</h3>[0m
[0;32m[0m[0;32m+                <p>Ubuntu 24.04</p>[0m
[0;32m[0m[0;32m+                <p>x86_64</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Nginx</h3>[0m
[0;32m[0m[0;32m+                <p>Workers: 2</p>[0m
[0;32m[0m[0;32m+                <p>Conexiones: 1024</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Red</h3>[0m
[0;32m[0m[0;32m+                <p>HTTP: 80</p>[0m
[0;32m[0m[0;32m+                <p>HTTPS: 443</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="footer">[0m
[0;32m[0m[0;32m+            <p><strong>SFI Networks</strong></p>[0m
[0;32m[0m[0;32m+            <p>Desplegado: 2025-08-06 | Entorno: laboratorio</p>[0m
[0;32m[0m[0;32m+            <p>Administrador: admin@empresa.com</p>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+    </div>[0m
[0;32m[0m[0;32m+</body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 22:49:57,778 p=3950 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 22:49:59,744 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-3950tt0it5zq/tmpt6unhy9l/index.html.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,111 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="es">[0m
[0;32m[0m[0;32m+<head>[0m
[0;32m[0m[0;32m+    <meta charset="UTF-8">[0m
[0;32m[0m[0;32m+    <meta name="viewport" content="width=device-width, initial-scale=1.0">[0m
[0;32m[0m[0;32m+    <title>Servidor Nginx - laboratorio</title>[0m
[0;32m[0m[0;32m+    <style>[0m
[0;32m[0m[0;32m+        body {[0m
[0;32m[0m[0;32m+            font-family: Arial, sans-serif;[0m
[0;32m[0m[0;32m+            line-height: 1.6;[0m
[0;32m[0m[0;32m+            margin: 0;[0m
[0;32m[0m[0;32m+            padding: 0;[0m
[0;32m[0m[0;32m+            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            min-height: 100vh;[0m
[0;32m[0m[0;32m+            display: flex;[0m
[0;32m[0m[0;32m+            align-items: center;[0m
[0;32m[0m[0;32m+            justify-content: center;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .container {[0m
[0;32m[0m[0;32m+            text-align: center;[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.1);[0m
[0;32m[0m[0;32m+            padding: 2rem;[0m
[0;32m[0m[0;32m+            border-radius: 10px;[0m
[0;32m[0m[0;32m+            backdrop-filter: blur(10px);[0m
[0;32m[0m[0;32m+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[0m
[0;32m[0m[0;32m+            max-width: 600px;[0m
[0;32m[0m[0;32m+            margin: 0 auto;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        h1 {[0m
[0;32m[0m[0;32m+            font-size: 2.5rem;[0m
[0;32m[0m[0;32m+            margin-bottom: 1rem;[0m
[0;32m[0m[0;32m+            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-grid {[0m
[0;32m[0m[0;32m+            display: grid;[0m
[0;32m[0m[0;32m+            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));[0m
[0;32m[0m[0;32m+            gap: 1rem;[0m
[0;32m[0m[0;32m+            margin: 2rem 0;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card {[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.2);[0m
[0;32m[0m[0;32m+            padding: 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 8px;[0m
[0;32m[0m[0;32m+            border: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card h3 {[0m
[0;32m[0m[0;32m+            margin: 0 0 0.5rem 0;[0m
[0;32m[0m[0;32m+            color: #FFD700;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .status {[0m
[0;32m[0m[0;32m+            background: #28a745;[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            padding: 0.5rem 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 20px;[0m
[0;32m[0m[0;32m+            display: inline-block;[0m
[0;32m[0m[0;32m+            margin: 1rem 0;[0m
[0;32m[0m[0;32m+            font-weight: bold;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .footer {[0m
[0;32m[0m[0;32m+            margin-top: 2rem;[0m
[0;32m[0m[0;32m+            padding-top: 1rem;[0m
[0;32m[0m[0;32m+            border-top: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+            font-size: 0.9rem;[0m
[0;32m[0m[0;32m+            opacity: 0.8;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    </style>[0m
[0;32m[0m[0;32m+</head>[0m
[0;32m[0m[0;32m+<body>[0m
[0;32m[0m[0;32m+    <div class="container">[0m
[0;32m[0m[0;32m+        <h1>Servidor Nginx - laboratorio</h1>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="status">[0m
[0;32m[0m[0;32m+            Nginx configurado exitosamente[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="info-grid">[0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Servidor</h3>[0m
[0;32m[0m[0;32m+                <p>aanalizz</p>[0m
[0;32m[0m[0;32m+                <p>10.0.2.15</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Sistema</h3>[0m
[0;32m[0m[0;32m+                <p>Ubuntu 24.04</p>[0m
[0;32m[0m[0;32m+                <p>x86_64</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Nginx</h3>[0m
[0;32m[0m[0;32m+                <p>Workers: 2</p>[0m
[0;32m[0m[0;32m+                <p>Conexiones: 1024</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Red</h3>[0m
[0;32m[0m[0;32m+                <p>HTTP: 80</p>[0m
[0;32m[0m[0;32m+                <p>HTTPS: 443</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="footer">[0m
[0;32m[0m[0;32m+            <p><strong>SFI Networks</strong></p>[0m
[0;32m[0m[0;32m+            <p>Desplegado: 2025-08-06 | Entorno: laboratorio</p>[0m
[0;32m[0m[0;32m+            <p>Administrador: admin@empresa.com</p>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+    </div>[0m
[0;32m[0m[0;32m+</body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 22:49:59,746 p=3950 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 22:49:59,768 p=3950 u=root n=ansible INFO| TASK [Config: Configurar logrotate para nginx] *****************************************************************************************************************************************
2025-08-06 22:50:03,072 p=3950 u=root n=ansible INFO| [0;31m--- before: /etc/logrotate.d/nginx[0m
[0;31m[0m[0;32m+++ after: /opt/nginx-lab/playbooks/files/nginx-logrotate[0m
[0;32m[0m[0;36m@@ -1,18 +1,21 @@[0m
[0;36m[0m[0;32m+# files/nginx-logrotate - Configuración para rotación de logs de nginx[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m /var/log/nginx/*.log {
[0;31m-	daily[0m
[0;31m[0m[0;31m-	missingok[0m
[0;31m[0m[0;31m-	rotate 14[0m
[0;31m[0m[0;31m-	compress[0m
[0;31m[0m[0;31m-	delaycompress[0m
[0;31m[0m[0;31m-	notifempty[0m
[0;31m[0m[0;31m-	create 0640 www-data adm[0m
[0;31m[0m[0;31m-	sharedscripts[0m
[0;31m[0m[0;31m-	prerotate[0m
[0;31m[0m[0;31m-		if [ -d /etc/logrotate.d/httpd-prerotate ]; then \[0m
[0;31m[0m[0;31m-			run-parts /etc/logrotate.d/httpd-prerotate; \[0m
[0;31m[0m[0;31m-		fi \[0m
[0;31m[0m[0;31m-	endscript[0m
[0;31m[0m[0;31m-	postrotate[0m
[0;31m[0m[0;31m-		invoke-rc.d nginx rotate >/dev/null 2>&1[0m
[0;31m[0m[0;31m-	endscript[0m
[0;31m[0m[0;32m+    daily                    [0m
[0;32m[0m[0;32m+    missingok               [0m
[0;32m[0m[0;32m+    rotate 30               [0m
[0;32m[0m[0;32m+    compress                [0m
[0;32m[0m[0;32m+    delaycompress           [0m
[0;32m[0m[0;32m+    notifempty              [0m
[0;32m[0m[0;32m+    create 0644 www-data www-data    [0m
[0;32m[0m[0;32m+    sharedscripts           [0m
[0;32m[0m[0;32m+    prerotate[0m
[0;32m[0m[0;32m+        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \[0m
[0;32m[0m[0;32m+            run-parts /etc/logrotate.d/httpd-prerotate; \[0m
[0;32m[0m[0;32m+        fi \[0m
[0;32m[0m[0;32m+    endscript[0m
[0;32m[0m[0;32m+    postrotate[0m
[0;32m[0m[0;32m+        invoke-rc.d nginx rotate >/dev/null 2>&1 || true[0m
[0;32m[0m[0;32m+    endscript[0m
[0;32m[0m }
[0;32m+[0m
[0;32m[0m

2025-08-06 22:50:03,074 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:50:03,111 p=3950 u=root n=ansible INFO| TASK [Config: Crear archivos de log si no existen] *************************************************************************************************************************************
2025-08-06 22:50:04,022 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,6 +1,6 @@[0m
[0;36m[0m {
[0;31m-    "atime": 1753882333.6083195,[0m
[0;31m[0m[0;31m-    "mtime": 1753882333.6083195,[0m
[0;31m[0m[0;32m+    "atime": 1754538603.92703,[0m
[0;32m[0m[0;32m+    "mtime": 1754538603.92703,[0m
[0;32m[0m     "path": "/var/log/nginx/access.log",
[0;31m-    "state": "file"[0m
[0;31m[0m[0;32m+    "state": "touch"[0m
[0;32m[0m }


2025-08-06 22:50:04,025 p=3950 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/access.log)
2025-08-06 22:50:04,881 p=3950 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,6 +1,6 @@[0m
[0;36m[0m {
[0;31m-    "atime": 1753882333.6163385,[0m
[0;31m[0m[0;31m-    "mtime": 1753882333.6163385,[0m
[0;31m[0m[0;32m+    "atime": 1754538604.783257,[0m
[0;32m[0m[0;32m+    "mtime": 1754538604.783257,[0m
[0;32m[0m     "path": "/var/log/nginx/error.log",
[0;31m-    "state": "file"[0m
[0;31m[0m[0;32m+    "state": "touch"[0m
[0;32m[0m }


2025-08-06 22:50:04,892 p=3950 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/error.log)
2025-08-06 22:50:04,974 p=3950 u=root n=ansible INFO| TASK [Config: Configurar firewall para HTTP/HTTPS] *************************************************************************************************************************************
2025-08-06 22:50:07,250 p=3950 u=root n=ansible INFO| changed: [web1] => (item=80)
2025-08-06 22:50:08,869 p=3950 u=root n=ansible INFO| changed: [web1] => (item=443)
2025-08-06 22:50:08,946 p=3950 u=root n=ansible INFO| TASK [Verificación: Comprobar sintaxis de nginx] ***************************************************************************************************************************************
2025-08-06 22:50:10,215 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:50:10,242 p=3950 u=root n=ansible INFO| TASK [Verificación: Mostrar resultado de sintaxis] *************************************************************************************************************************************
2025-08-06 22:50:10,440 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "nginx_syntax_check.stderr_lines": []
}
2025-08-06 22:50:10,460 p=3950 u=root n=ansible INFO| TASK [Service: Asegurar que nginx esté iniciado y habilitado] **************************************************************************************************************************
2025-08-06 22:50:11,938 p=3950 u=root n=ansible INFO| ok: [web1]
2025-08-06 22:50:11,984 p=3950 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx responde] **************************************************************************************************************************************
2025-08-06 22:50:12,163 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:50:12,229 p=3950 u=root n=ansible INFO| TASK [Info: Mostrar información de configuración] **************************************************************************************************************************************
2025-08-06 22:50:12,467 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nCONFIGURACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nPuerto HTTP: 80\nPuerto HTTPS: 443\nWorkers: 2\nConexiones por worker: 1024\nVirtual Hosts configurados: 2\n=====================================\n"
}
2025-08-06 22:50:12,528 p=3950 u=root n=ansible INFO| RUNNING HANDLER [restart nginx] ********************************************************************************************************************************************************
2025-08-06 22:50:13,491 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:50:13,514 p=3950 u=root n=ansible INFO| RUNNING HANDLER [reload nginx] *********************************************************************************************************************************************************
2025-08-06 22:50:14,576 p=3950 u=root n=ansible INFO| changed: [web1]
2025-08-06 22:50:14,592 p=3950 u=root n=ansible INFO| RUNNING HANDLER [validate nginx config] ************************************************************************************************************************************************
2025-08-06 22:50:15,308 p=3950 u=root n=ansible INFO| skipping: [web1]
2025-08-06 22:50:15,329 p=3950 u=root n=ansible INFO| TASK [Reporte: Mostrar resumen final] **************************************************************************************************************************************************
2025-08-06 22:50:15,453 p=3950 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nLABORATORIO COMPLETADO\n=====================================\nInstalación: EXITOSA\nConfiguración: EXITOSA\nVerificación: EXITOSA\nServidores configurados: 1\nURLs disponibles:\n- http://10.0.2.15:80\nPróximos pasos:\n1. Acceder a las URLs para verificar\n2. Revisar logs en /var/log/nginx/\n3. Experimentar con configuraciones\n=====================================\n"
}
2025-08-06 22:50:15,459 p=3950 u=root n=ansible INFO| PLAY RECAP *****************************************************************************************************************************************************************************
2025-08-06 22:50:15,460 p=3950 u=root n=ansible INFO| web1                       : ok=28   changed=14   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2025-08-06 22:50:20,584 p=4522 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 5, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug: Verificar variables cargadas"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-08-06 22:56:25,807 p=4606 u=root n=ansible INFO| web1 | SUCCESS => {
    "document_root": "/var/www/html"
}
2025-08-06 22:56:54,623 p=4614 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 22:56:54,708 p=4614 u=root n=ansible INFO| web1 | SUCCESS => {
    "ansible_facts": {
        "ansible_all_ipv4_addresses": [
            "172.17.0.1",
            "10.0.2.15"
        ],
        "ansible_all_ipv6_addresses": [
            "fd17:625c:f037:2:a00:27ff:fe35:5160",
            "fe80::a00:27ff:fe35:5160",
            "fd17:625c:f037:2:38f:b103:2e6:8a2f"
        ],
        "ansible_apparmor": {
            "status": "enabled"
        },
        "ansible_architecture": "x86_64",
        "ansible_bios_date": "12/01/2006",
        "ansible_bios_vendor": "innotek GmbH",
        "ansible_bios_version": "VirtualBox",
        "ansible_board_asset_tag": "NA",
        "ansible_board_name": "VirtualBox",
        "ansible_board_serial": "0",
        "ansible_board_vendor": "Oracle Corporation",
        "ansible_board_version": "1.2",
        "ansible_chassis_asset_tag": "NA",
        "ansible_chassis_serial": "NA",
        "ansible_chassis_vendor": "Oracle Corporation",
        "ansible_chassis_version": "NA",
        "ansible_cmdline": {
            "BOOT_IMAGE": "/boot/vmlinuz-6.14.0-27-generic",
            "quiet": true,
            "ro": true,
            "root": "UUID=6a3e3e2f-a396-4666-b8a0-8a518b877729",
            "splash": true
        },
        "ansible_date_time": {
            "date": "2025-08-06",
            "day": "06",
            "epoch": "1754539013",
            "epoch_int": "1754539013",
            "hour": "22",
            "iso8601": "2025-08-07T03:56:53Z",
            "iso8601_basic": "20250806T225653893571",
            "iso8601_basic_short": "20250806T225653",
            "iso8601_micro": "2025-08-07T03:56:53.893571Z",
            "minute": "56",
            "month": "08",
            "second": "53",
            "time": "22:56:53",
            "tz": "-05",
            "tz_dst": "-05",
            "tz_offset": "-0500",
            "weekday": "Wednesday",
            "weekday_number": "3",
            "weeknumber": "31",
            "year": "2025"
        },
        "ansible_default_ipv4": {
            "address": "10.0.2.15",
            "alias": "enp0s3",
            "broadcast": "10.0.2.255",
            "gateway": "10.0.2.2",
            "interface": "enp0s3",
            "macaddress": "08:00:27:35:51:60",
            "mtu": 1500,
            "netmask": "255.255.255.0",
            "network": "10.0.2.0",
            "prefix": "24",
            "type": "ether"
        },
        "ansible_default_ipv6": {
            "address": "fd17:625c:f037:2:38f:b103:2e6:8a2f",
            "gateway": "fe80::2",
            "interface": "enp0s3",
            "macaddress": "08:00:27:35:51:60",
            "mtu": 1500,
            "prefix": "64",
            "scope": "global",
            "type": "ether"
        },
        "ansible_device_links": {
            "ids": {
                "sda": [
                    "ata-VBOX_HARDDISK_VBee3775c2-20976798"
                ],
                "sda1": [
                    "ata-VBOX_HARDDISK_VBee3775c2-20976798-part1"
                ],
                "sda2": [
                    "ata-VBOX_HARDDISK_VBee3775c2-20976798-part2"
                ],
                "sr0": [
                    "ata-VBOX_CD-ROM_VB2-01700376"
                ]
            },
            "labels": {},
            "masters": {},
            "uuids": {
                "sda2": [
                    "6a3e3e2f-a396-4666-b8a0-8a518b877729"
                ]
            }
        },
        "ansible_devices": {
            "loop0": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 213392,
                "sectorsize": "512",
                "size": "104.20 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop1": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 8,
                "sectorsize": "512",
                "size": "4.00 KB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop10": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 22056,
                "sectorsize": "512",
                "size": "10.77 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop11": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 104240,
                "sectorsize": "512",
                "size": "50.90 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop12": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 22176,
                "sectorsize": "512",
                "size": "10.83 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop13": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 100952,
                "sectorsize": "512",
                "size": "49.29 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop14": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 1136,
                "sectorsize": "512",
                "size": "568.00 KB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop15": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 1152,
                "sectorsize": "512",
                "size": "576.00 KB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop16": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 0,
                "sectorsize": "512",
                "size": "0.00 Bytes",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop2": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 151352,
                "sectorsize": "512",
                "size": "73.90 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop3": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 502400,
                "sectorsize": "512",
                "size": "245.31 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop4": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 151376,
                "sectorsize": "512",
                "size": "73.91 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop5": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 502024,
                "sectorsize": "512",
                "size": "245.13 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop6": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 22800,
                "sectorsize": "512",
                "size": "11.13 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop7": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 1056784,
                "sectorsize": "512",
                "size": "516.01 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop8": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 187776,
                "sectorsize": "512",
                "size": "91.69 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "loop9": {
                "holders": [],
                "host": "",
                "links": {
                    "ids": [],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": null,
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "none",
                "sectors": 329240,
                "sectorsize": "512",
                "size": "160.76 MB",
                "support_discard": "4096",
                "vendor": null,
                "virtual": 1
            },
            "sda": {
                "holders": [],
                "host": "SATA controller: Intel Corporation 82801HM/HEM (ICH8M/ICH8M-E) SATA Controller [AHCI mode] (rev 02)",
                "links": {
                    "ids": [
                        "ata-VBOX_HARDDISK_VBee3775c2-20976798"
                    ],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": "VBOX HARDDISK",
                "partitions": {
                    "sda1": {
                        "holders": [],
                        "links": {
                            "ids": [
                                "ata-VBOX_HARDDISK_VBee3775c2-20976798-part1"
                            ],
                            "labels": [],
                            "masters": [],
                            "uuids": []
                        },
                        "sectors": 2048,
                        "sectorsize": 512,
                        "size": "1.00 MB",
                        "start": "2048",
                        "uuid": null
                    },
                    "sda2": {
                        "holders": [],
                        "links": {
                            "ids": [
                                "ata-VBOX_HARDDISK_VBee3775c2-20976798-part2"
                            ],
                            "labels": [],
                            "masters": [],
                            "uuids": [
                                "6a3e3e2f-a396-4666-b8a0-8a518b877729"
                            ]
                        },
                        "sectors": 251652096,
                        "sectorsize": 512,
                        "size": "120.00 GB",
                        "start": "4096",
                        "uuid": "6a3e3e2f-a396-4666-b8a0-8a518b877729"
                    }
                },
                "removable": "0",
                "rotational": "1",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "mq-deadline",
                "sectors": 251658240,
                "sectorsize": "512",
                "size": "120.00 GB",
                "support_discard": "0",
                "vendor": "ATA",
                "virtual": 1
            },
            "sr0": {
                "holders": [],
                "host": "IDE interface: Intel Corporation 82371AB/EB/MB PIIX4 IDE (rev 01)",
                "links": {
                    "ids": [
                        "ata-VBOX_CD-ROM_VB2-01700376"
                    ],
                    "labels": [],
                    "masters": [],
                    "uuids": []
                },
                "model": "CD-ROM",
                "partitions": {},
                "removable": "1",
                "rotational": "0",
                "sas_address": null,
                "sas_device_handle": null,
                "scheduler_mode": "mq-deadline",
                "sectors": 2097151,
                "sectorsize": "512",
                "size": "1024.00 MB",
                "support_discard": "0",
                "vendor": "VBOX",
                "virtual": 1
            }
        },
        "ansible_distribution": "Ubuntu",
        "ansible_distribution_file_parsed": true,
        "ansible_distribution_file_path": "/etc/os-release",
        "ansible_distribution_file_variety": "Debian",
        "ansible_distribution_major_version": "24",
        "ansible_distribution_release": "noble",
        "ansible_distribution_version": "24.04",
        "ansible_dns": {
            "nameservers": [
                "127.0.0.53"
            ],
            "options": {
                "edns0": true,
                "trust-ad": true
            },
            "search": [
                "."
            ]
        },
        "ansible_docker0": {
            "active": false,
            "device": "docker0",
            "features": {
                "esp_hw_offload": "off [fixed]",
                "esp_tx_csum_hw_offload": "off [fixed]",
                "generic_receive_offload": "on",
                "generic_segmentation_offload": "on",
                "highdma": "on",
                "hsr_dup_offload": "off [fixed]",
                "hsr_fwd_offload": "off [fixed]",
                "hsr_tag_ins_offload": "off [fixed]",
                "hsr_tag_rm_offload": "off [fixed]",
                "hw_tc_offload": "off [fixed]",
                "l2_fwd_offload": "off [fixed]",
                "large_receive_offload": "off [fixed]",
                "loopback": "off [fixed]",
                "macsec_hw_offload": "off [fixed]",
                "ntuple_filters": "off [fixed]",
                "receive_hashing": "off [fixed]",
                "rx_all": "off [fixed]",
                "rx_checksumming": "off [fixed]",
                "rx_fcs": "off [fixed]",
                "rx_gro_hw": "off [fixed]",
                "rx_gro_list": "off",
                "rx_udp_gro_forwarding": "off",
                "rx_udp_tunnel_port_offload": "off [fixed]",
                "rx_vlan_filter": "off [fixed]",
                "rx_vlan_offload": "off [fixed]",
                "rx_vlan_stag_filter": "off [fixed]",
                "rx_vlan_stag_hw_parse": "off [fixed]",
                "scatter_gather": "on",
                "tcp_segmentation_offload": "on",
                "tls_hw_record": "off [fixed]",
                "tls_hw_rx_offload": "off [fixed]",
                "tls_hw_tx_offload": "off [fixed]",
                "tx_checksum_fcoe_crc": "off [fixed]",
                "tx_checksum_ip_generic": "on",
                "tx_checksum_ipv4": "off [fixed]",
                "tx_checksum_ipv6": "off [fixed]",
                "tx_checksum_sctp": "off [fixed]",
                "tx_checksumming": "on",
                "tx_esp_segmentation": "on",
                "tx_fcoe_segmentation": "on",
                "tx_gre_csum_segmentation": "on",
                "tx_gre_segmentation": "on",
                "tx_gso_list": "on",
                "tx_gso_partial": "on",
                "tx_gso_robust": "on",
                "tx_ipxip4_segmentation": "on",
                "tx_ipxip6_segmentation": "on",
                "tx_nocache_copy": "off",
                "tx_scatter_gather": "on",
                "tx_scatter_gather_fraglist": "on",
                "tx_sctp_segmentation": "on",
                "tx_tcp6_segmentation": "on",
                "tx_tcp_ecn_segmentation": "on",
                "tx_tcp_mangleid_segmentation": "on",
                "tx_tcp_segmentation": "on",
                "tx_tunnel_remcsum_segmentation": "on",
                "tx_udp_segmentation": "on",
                "tx_udp_tnl_csum_segmentation": "on",
                "tx_udp_tnl_segmentation": "on",
                "tx_vlan_offload": "on",
                "tx_vlan_stag_hw_insert": "on",
                "vlan_challenged": "off [fixed]"
            },
            "hw_timestamp_filters": [],
            "id": "8000.b697d0b914b6",
            "interfaces": [],
            "ipv4": {
                "address": "172.17.0.1",
                "broadcast": "172.17.255.255",
                "netmask": "255.255.0.0",
                "network": "172.17.0.0",
                "prefix": "16"
            },
            "macaddress": "b6:97:d0:b9:14:b6",
            "mtu": 1500,
            "promisc": false,
            "speed": -1,
            "stp": false,
            "timestamping": [],
            "type": "bridge"
        },
        "ansible_domain": "",
        "ansible_effective_group_id": 0,
        "ansible_effective_user_id": 0,
        "ansible_enp0s3": {
            "active": true,
            "device": "enp0s3",
            "features": {
                "esp_hw_offload": "off [fixed]",
                "esp_tx_csum_hw_offload": "off [fixed]",
                "generic_receive_offload": "on",
                "generic_segmentation_offload": "on",
                "highdma": "off [fixed]",
                "hsr_dup_offload": "off [fixed]",
                "hsr_fwd_offload": "off [fixed]",
                "hsr_tag_ins_offload": "off [fixed]",
                "hsr_tag_rm_offload": "off [fixed]",
                "hw_tc_offload": "off [fixed]",
                "l2_fwd_offload": "off [fixed]",
                "large_receive_offload": "off [fixed]",
                "loopback": "off [fixed]",
                "macsec_hw_offload": "off [fixed]",
                "ntuple_filters": "off [fixed]",
                "receive_hashing": "off [fixed]",
                "rx_all": "off",
                "rx_checksumming": "off",
                "rx_fcs": "off",
                "rx_gro_hw": "off [fixed]",
                "rx_gro_list": "off",
                "rx_udp_gro_forwarding": "off",
                "rx_udp_tunnel_port_offload": "off [fixed]",
                "rx_vlan_filter": "on [fixed]",
                "rx_vlan_offload": "on",
                "rx_vlan_stag_filter": "off [fixed]",
                "rx_vlan_stag_hw_parse": "off [fixed]",
                "scatter_gather": "on",
                "tcp_segmentation_offload": "on",
                "tls_hw_record": "off [fixed]",
                "tls_hw_rx_offload": "off [fixed]",
                "tls_hw_tx_offload": "off [fixed]",
                "tx_checksum_fcoe_crc": "off [fixed]",
                "tx_checksum_ip_generic": "on",
                "tx_checksum_ipv4": "off [fixed]",
                "tx_checksum_ipv6": "off [fixed]",
                "tx_checksum_sctp": "off [fixed]",
                "tx_checksumming": "on",
                "tx_esp_segmentation": "off [fixed]",
                "tx_fcoe_segmentation": "off [fixed]",
                "tx_gre_csum_segmentation": "off [fixed]",
                "tx_gre_segmentation": "off [fixed]",
                "tx_gso_list": "off [fixed]",
                "tx_gso_partial": "off [fixed]",
                "tx_gso_robust": "off [fixed]",
                "tx_ipxip4_segmentation": "off [fixed]",
                "tx_ipxip6_segmentation": "off [fixed]",
                "tx_nocache_copy": "off",
                "tx_scatter_gather": "on",
                "tx_scatter_gather_fraglist": "off [fixed]",
                "tx_sctp_segmentation": "off [fixed]",
                "tx_tcp6_segmentation": "off [fixed]",
                "tx_tcp_ecn_segmentation": "off [fixed]",
                "tx_tcp_mangleid_segmentation": "off",
                "tx_tcp_segmentation": "on",
                "tx_tunnel_remcsum_segmentation": "off [fixed]",
                "tx_udp_segmentation": "off [fixed]",
                "tx_udp_tnl_csum_segmentation": "off [fixed]",
                "tx_udp_tnl_segmentation": "off [fixed]",
                "tx_vlan_offload": "on [fixed]",
                "tx_vlan_stag_hw_insert": "off [fixed]",
                "vlan_challenged": "off [fixed]"
            },
            "hw_timestamp_filters": [],
            "ipv4": {
                "address": "10.0.2.15",
                "broadcast": "10.0.2.255",
                "netmask": "255.255.255.0",
                "network": "10.0.2.0",
                "prefix": "24"
            },
            "ipv6": [
                {
                    "address": "fd17:625c:f037:2:a00:27ff:fe35:5160",
                    "prefix": "64",
                    "scope": "global"
                },
                {
                    "address": "fe80::a00:27ff:fe35:5160",
                    "prefix": "64",
                    "scope": "link"
                },
                {
                    "address": "fd17:625c:f037:2:38f:b103:2e6:8a2f",
                    "prefix": "64",
                    "scope": "global"
                }
            ],
            "macaddress": "08:00:27:35:51:60",
            "module": "e1000",
            "mtu": 1500,
            "pciid": "0000:00:03.0",
            "promisc": false,
            "speed": 1000,
            "timestamping": [],
            "type": "ether"
        },
        "ansible_env": {
            "HOME": "/root",
            "LANG": "en_US.UTF-8",
            "LOGNAME": "root",
            "MAIL": "/var/mail/root",
            "PATH": "/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin",
            "PWD": "/home/analiz",
            "SHELL": "/bin/bash",
            "SUDO_COMMAND": "/bin/sh -c echo BECOME-SUCCESS-hgqfyxvrjyiwcykgsozjjqlvtjhvswao ; /usr/bin/python3.12",
            "SUDO_GID": "1000",
            "SUDO_UID": "1000",
            "SUDO_USER": "analiz",
            "TERM": "unknown",
            "USER": "root"
        },
        "ansible_fibre_channel_wwn": [],
        "ansible_fips": false,
        "ansible_flags": [
            "fpu",
            "vme",
            "de",
            "pse",
            "tsc",
            "msr",
            "pae",
            "mce",
            "cx8",
            "apic",
            "sep",
            "mtrr",
            "pge",
            "mca",
            "cmov",
            "pat",
            "pse36",
            "clflush",
            "mmx",
            "fxsr",
            "sse",
            "sse2",
            "ht",
            "syscall",
            "nx",
            "mmxext",
            "fxsr_opt",
            "rdtscp",
            "lm",
            "constant_tsc",
            "rep_good",
            "nopl",
            "nonstop_tsc",
            "cpuid",
            "extd_apicid",
            "tsc_known_freq",
            "pni",
            "pclmulqdq",
            "ssse3",
            "cx16",
            "sse4_1",
            "sse4_2",
            "movbe",
            "popcnt",
            "aes",
            "rdrand",
            "hypervisor",
            "lahf_lm",
            "cmp_legacy",
            "cr8_legacy",
            "abm",
            "sse4a",
            "misalignsse",
            "3dnowprefetch",
            "vmmcall",
            "fsgsbase",
            "bmi1",
            "bmi2",
            "invpcid",
            "rdseed",
            "adx",
            "clflushopt",
            "sha_ni",
            "arat",
            "debug_swap"
        ],
        "ansible_form_factor": "Other",
        "ansible_fqdn": "aanalizz",
        "ansible_hostname": "aanalizz",
        "ansible_hostnqn": "",
        "ansible_interfaces": [
            "docker0",
            "enp0s3",
            "lo"
        ],
        "ansible_is_chroot": false,
        "ansible_iscsi_iqn": "",
        "ansible_kernel": "6.14.0-27-generic",
        "ansible_kernel_version": "#27~24.04.1-Ubuntu SMP PREEMPT_DYNAMIC Tue Jul 22 17:38:49 UTC 2",
        "ansible_lo": {
            "active": true,
            "device": "lo",
            "features": {
                "esp_hw_offload": "off [fixed]",
                "esp_tx_csum_hw_offload": "off [fixed]",
                "generic_receive_offload": "on",
                "generic_segmentation_offload": "on",
                "highdma": "on [fixed]",
                "hsr_dup_offload": "off [fixed]",
                "hsr_fwd_offload": "off [fixed]",
                "hsr_tag_ins_offload": "off [fixed]",
                "hsr_tag_rm_offload": "off [fixed]",
                "hw_tc_offload": "off [fixed]",
                "l2_fwd_offload": "off [fixed]",
                "large_receive_offload": "off [fixed]",
                "loopback": "on [fixed]",
                "macsec_hw_offload": "off [fixed]",
                "ntuple_filters": "off [fixed]",
                "receive_hashing": "off [fixed]",
                "rx_all": "off [fixed]",
                "rx_checksumming": "on [fixed]",
                "rx_fcs": "off [fixed]",
                "rx_gro_hw": "off [fixed]",
                "rx_gro_list": "off",
                "rx_udp_gro_forwarding": "off",
                "rx_udp_tunnel_port_offload": "off [fixed]",
                "rx_vlan_filter": "off [fixed]",
                "rx_vlan_offload": "off [fixed]",
                "rx_vlan_stag_filter": "off [fixed]",
                "rx_vlan_stag_hw_parse": "off [fixed]",
                "scatter_gather": "on",
                "tcp_segmentation_offload": "on",
                "tls_hw_record": "off [fixed]",
                "tls_hw_rx_offload": "off [fixed]",
                "tls_hw_tx_offload": "off [fixed]",
                "tx_checksum_fcoe_crc": "off [fixed]",
                "tx_checksum_ip_generic": "on [fixed]",
                "tx_checksum_ipv4": "off [fixed]",
                "tx_checksum_ipv6": "off [fixed]",
                "tx_checksum_sctp": "on [fixed]",
                "tx_checksumming": "on",
                "tx_esp_segmentation": "off [fixed]",
                "tx_fcoe_segmentation": "off [fixed]",
                "tx_gre_csum_segmentation": "off [fixed]",
                "tx_gre_segmentation": "off [fixed]",
                "tx_gso_list": "on",
                "tx_gso_partial": "off [fixed]",
                "tx_gso_robust": "off [fixed]",
                "tx_ipxip4_segmentation": "off [fixed]",
                "tx_ipxip6_segmentation": "off [fixed]",
                "tx_nocache_copy": "off [fixed]",
                "tx_scatter_gather": "on [fixed]",
                "tx_scatter_gather_fraglist": "on [fixed]",
                "tx_sctp_segmentation": "on",
                "tx_tcp6_segmentation": "on",
                "tx_tcp_ecn_segmentation": "on",
                "tx_tcp_mangleid_segmentation": "on",
                "tx_tcp_segmentation": "on",
                "tx_tunnel_remcsum_segmentation": "off [fixed]",
                "tx_udp_segmentation": "on",
                "tx_udp_tnl_csum_segmentation": "off [fixed]",
                "tx_udp_tnl_segmentation": "off [fixed]",
                "tx_vlan_offload": "off [fixed]",
                "tx_vlan_stag_hw_insert": "off [fixed]",
                "vlan_challenged": "on [fixed]"
            },
            "hw_timestamp_filters": [],
            "ipv4": {
                "address": "127.0.0.1",
                "broadcast": "",
                "netmask": "255.0.0.0",
                "network": "127.0.0.0",
                "prefix": "8"
            },
            "ipv6": [
                {
                    "address": "::1",
                    "prefix": "128",
                    "scope": "host"
                }
            ],
            "mtu": 65536,
            "promisc": false,
            "timestamping": [],
            "type": "loopback"
        },
        "ansible_loadavg": {
            "15m": 2.96533203125,
            "1m": 4.0478515625,
            "5m": 3.564453125
        },
        "ansible_local": {},
        "ansible_locally_reachable_ips": {
            "ipv4": [
                "10.0.2.15",
                "127.0.0.0/8",
                "127.0.0.1",
                "172.17.0.1"
            ],
            "ipv6": [
                "::1",
                "fd17:625c:f037:2:38f:b103:2e6:8a2f",
                "fd17:625c:f037:2:a00:27ff:fe35:5160",
                "fe80::a00:27ff:fe35:5160"
            ]
        },
        "ansible_lsb": {
            "codename": "noble",
            "description": "Ubuntu 24.04.2 LTS",
            "id": "Ubuntu",
            "major_release": "24",
            "release": "24.04"
        },
        "ansible_lvm": "N/A",
        "ansible_machine": "x86_64",
        "ansible_machine_id": "f77a0a3ff70543bea28d9f942762eb82",
        "ansible_memfree_mb": 3192,
        "ansible_memory_mb": {
            "nocache": {
                "free": 4906,
                "used": 2893
            },
            "real": {
                "free": 3192,
                "total": 7799,
                "used": 4607
            },
            "swap": {
                "cached": 0,
                "free": 3865,
                "total": 3865,
                "used": 0
            }
        },
        "ansible_memtotal_mb": 7799,
        "ansible_mounts": [
            {
                "block_available": 24715531,
                "block_size": 4096,
                "block_total": 30816400,
                "block_used": 6100869,
                "device": "/dev/sda2",
                "dump": 0,
                "fstype": "ext4",
                "inode_available": 7528604,
                "inode_total": 7864320,
                "inode_used": 335716,
                "mount": "/",
                "options": "rw,relatime",
                "passno": 0,
                "size_available": 101234814976,
                "size_total": 126223974400,
                "uuid": "6a3e3e2f-a396-4666-b8a0-8a518b877729"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 834,
                "block_used": 834,
                "device": "/dev/loop0",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 12937,
                "inode_used": 12937,
                "mount": "/snap/core/17212",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 109314048,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 1,
                "block_used": 1,
                "device": "/dev/loop1",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 29,
                "inode_used": 29,
                "mount": "/snap/bare/5",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 131072,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 592,
                "block_used": 592,
                "device": "/dev/loop2",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 14261,
                "inode_used": 14261,
                "mount": "/snap/core22/2010",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 77594624,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 1963,
                "block_used": 1963,
                "device": "/dev/loop3",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 813,
                "inode_used": 813,
                "mount": "/snap/firefox/6495",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 257294336,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 90,
                "block_used": 90,
                "device": "/dev/loop6",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 65,
                "inode_used": 65,
                "mount": "/snap/firmware-updater/167",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 11796480,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 592,
                "block_used": 592,
                "device": "/dev/loop4",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 14263,
                "inode_used": 14263,
                "mount": "/snap/core22/2045",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 77594624,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 4129,
                "block_used": 4129,
                "device": "/dev/loop7",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 21133,
                "inode_used": 21133,
                "mount": "/snap/gnome-42-2204/202",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 541196288,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 1962,
                "block_used": 1962,
                "device": "/dev/loop5",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 813,
                "inode_used": 813,
                "mount": "/snap/firefox/6565",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 257163264,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 734,
                "block_used": 734,
                "device": "/dev/loop8",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 76208,
                "inode_used": 76208,
                "mount": "/snap/gtk-common-themes/1535",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 96206848,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 1287,
                "block_used": 1287,
                "device": "/dev/loop9",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 32766,
                "inode_used": 32766,
                "mount": "/snap/midori/550",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 168689664,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 87,
                "block_used": 87,
                "device": "/dev/loop10",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 68,
                "inode_used": 68,
                "mount": "/snap/snap-store/1248",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 11403264,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 87,
                "block_used": 87,
                "device": "/dev/loop12",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 68,
                "inode_used": 68,
                "mount": "/snap/snap-store/1270",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 11403264,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 395,
                "block_used": 395,
                "device": "/dev/loop13",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 616,
                "inode_used": 616,
                "mount": "/snap/snapd/24792",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 51773440,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 408,
                "block_used": 408,
                "device": "/dev/loop11",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 608,
                "inode_used": 608,
                "mount": "/snap/snapd/24718",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 53477376,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 5,
                "block_used": 5,
                "device": "/dev/loop14",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 61,
                "inode_used": 61,
                "mount": "/snap/snapd-desktop-integration/253",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 655360,
                "uuid": "N/A"
            },
            {
                "block_available": 0,
                "block_size": 131072,
                "block_total": 5,
                "block_used": 5,
                "device": "/dev/loop15",
                "dump": 0,
                "fstype": "squashfs",
                "inode_available": 0,
                "inode_total": 61,
                "inode_used": 61,
                "mount": "/snap/snapd-desktop-integration/315",
                "options": "ro,nodev,relatime,errors=continue,threads=single",
                "passno": 0,
                "size_available": 0,
                "size_total": 655360,
                "uuid": "N/A"
            }
        ],
        "ansible_nodename": "aanalizz",
        "ansible_os_family": "Debian",
        "ansible_pkg_mgr": "apt",
        "ansible_proc_cmdline": {
            "BOOT_IMAGE": "/boot/vmlinuz-6.14.0-27-generic",
            "quiet": true,
            "ro": true,
            "root": "UUID=6a3e3e2f-a396-4666-b8a0-8a518b877729",
            "splash": true
        },
        "ansible_processor": [
            "0",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics",
            "1",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics",
            "2",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics",
            "3",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics",
            "4",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics",
            "5",
            "AuthenticAMD",
            "AMD Ryzen 5 Pro 7535U with Radeon Graphics"
        ],
        "ansible_processor_cores": 6,
        "ansible_processor_count": 1,
        "ansible_processor_nproc": 6,
        "ansible_processor_threads_per_core": 1,
        "ansible_processor_vcpus": 6,
        "ansible_product_name": "VirtualBox",
        "ansible_product_serial": "VirtualBox-68e85ce4-e1c8-41d2-acb7-4ff68bd42cd9",
        "ansible_product_uuid": "e45ce868-c8e1-d241-acb7-4ff68bd42cd9",
        "ansible_product_version": "1.2",
        "ansible_python": {
            "executable": "/usr/bin/python3.12",
            "has_sslcontext": true,
            "type": "cpython",
            "version": {
                "major": 3,
                "micro": 3,
                "minor": 12,
                "releaselevel": "final",
                "serial": 0
            },
            "version_info": [
                3,
                12,
                3,
                "final",
                0
            ]
        },
        "ansible_python_version": "3.12.3",
        "ansible_real_group_id": 0,
        "ansible_real_user_id": 0,
        "ansible_selinux": {
            "status": "disabled"
        },
        "ansible_selinux_python_present": true,
        "ansible_service_mgr": "systemd",
        "ansible_ssh_host_key_ecdsa_public": "AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBMsCbAKHI+R8pBX6L/66eJkQwSRNbHSfBkqyB4Y4Uu3qmQ/mHGznhqdkdbAO1L0249I047Ra/BqcL8SjX+rufY0=",
        "ansible_ssh_host_key_ecdsa_public_keytype": "ecdsa-sha2-nistp256",
        "ansible_ssh_host_key_ed25519_public": "AAAAC3NzaC1lZDI1NTE5AAAAIK4mo3BqLczBVoHZrD6GKPp3KN9qTx4UsUD80Bq/T4bC",
        "ansible_ssh_host_key_ed25519_public_keytype": "ssh-ed25519",
        "ansible_ssh_host_key_rsa_public": "AAAAB3NzaC1yc2EAAAADAQABAAABgQC9L9VvqM9CNZFAn8TiznMvi6bTLLdfWItYYgKCP5Smqknng7UddX+rbMVculrEx1LovUvpnmY5j7sZ2sAX2HcSDMKOdwT2DE9DysGJWN75Dv4tOn4Fv8O15DymmoBnw8sqSjufEb62vv9dox5NmGlPw8iAufWUICmHiqW3RDScZyEo8HR6SoNVoE1DjpVWT8luDvwgrMBf4I4FfmChIgsfhdS8QD0QuM7aCUVAH40OTZVTXX3eFIRAaCKiV34HsQjcPI4x3MwIUb6nyCCFqsy3pASJ4A/8xwxpVxUMy7W/MXgaH1et8YX6o7lkBxXVfTkUKTCA8iusdBm4zp8eAJjWtb4dBM3/IdWVdX35Wxo7If3jb3/IPIlh+GFGYwQKYeXx70Mco/9c6nlY17nmPvSTBtgS6YVD/lqfvyppezOPGjFyToC2nG/0zoRZfqxYhT74mKAngBGKHumXlxRbzK4EN6hPHCIql2ZGKOjEiq6Nl65tVCvDr9i9bjRHToWHvts=",
        "ansible_ssh_host_key_rsa_public_keytype": "ssh-rsa",
        "ansible_swapfree_mb": 3865,
        "ansible_swaptotal_mb": 3865,
        "ansible_system": "Linux",
        "ansible_system_capabilities": [],
        "ansible_system_capabilities_enforced": "False",
        "ansible_system_vendor": "innotek GmbH",
        "ansible_systemd": {
            "features": "+PAM +AUDIT +SELINUX +APPARMOR +IMA +SMACK +SECCOMP +GCRYPT -GNUTLS +OPENSSL +ACL +BLKID +CURL +ELFUTILS +FIDO2 +IDN2 -IDN +IPTC +KMOD +LIBCRYPTSETUP +LIBFDISK +PCRE2 -PWQUALITY +P11KIT +QRENCODE +TPM2 +BZIP2 +LZ4 +XZ +ZLIB +ZSTD -BPF_FRAMEWORK -XKBCOMMON +UTMP +SYSVINIT default-hierarchy=unified",
            "version": 255
        },
        "ansible_uptime_seconds": 1849,
        "ansible_user_dir": "/root",
        "ansible_user_gecos": "root",
        "ansible_user_gid": 0,
        "ansible_user_id": "root",
        "ansible_user_shell": "/bin/bash",
        "ansible_user_uid": 0,
        "ansible_userspace_architecture": "x86_64",
        "ansible_userspace_bits": "64",
        "ansible_virtualization_role": "guest",
        "ansible_virtualization_tech_guest": [
            "virtualbox"
        ],
        "ansible_virtualization_tech_host": [],
        "ansible_virtualization_type": "virtualbox",
        "discovered_interpreter_python": "/usr/bin/python3.12",
        "gather_subset": [
            "all"
        ],
        "module_setup": true
    },
    "changed": false
}
2025-08-06 22:57:36,605 p=4763 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 5, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug: Verificar variables cargadas"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-08-06 23:00:13,982 p=4803 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 8, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug: Verificar variables cargadas"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-08-06 23:00:41,876 p=4809 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 5, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug: Verificar variables cargadas"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-08-06 23:01:51,730 p=4815 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 9, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug: Verificar variables cargadas"
  ^ here
This one looks easy to fix. It seems that there is a value started
with a quote, and the YAML parser is expecting to see the line ended
with the same kind of quote. For instance:

    when: "ok" in result.stdout

Could be written as:

   when: '"ok" in result.stdout'

Or equivalently:

   when: "'ok' in result.stdout"

2025-08-06 23:04:04,105 p=4832 u=root n=ansible ERROR| ERROR! 'debug' is not a valid attribute for a Play

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:

# TAREAS DE INSTALACIÓN
- name: "Debug Verificar variables cargadas"
  ^ here

2025-08-06 23:06:59,949 p=4866 u=root n=ansible INFO| PLAY [Instalación y configuración de Nginx] ********************************************************************************************************************************************
2025-08-06 23:07:00,027 p=4866 u=root n=ansible INFO| TASK [Gathering Facts] *****************************************************************************************************************************************************************
2025-08-06 23:07:04,016 p=4866 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 23:07:04,017 p=4866 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:07:04,046 p=4866 u=root n=ansible INFO| TASK [Debug: Verificar variables cargadas] *********************************************************************************************************************************************
2025-08-06 23:07:04,146 p=4866 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: NO DEFINIDO\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-08-06 23:07:04,162 p=4866 u=root n=ansible INFO| TASK [Sistema: Configurar timezone] ****************************************************************************************************************************************************
2025-08-06 23:07:04,239 p=4866 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:07:04,263 p=4866 u=root n=ansible INFO| TASK [Sistema: Instalar paquetes del sistema] ******************************************************************************************************************************************
2025-08-06 23:07:10,132 p=4866 u=root n=ansible INFO| The following additional packages will be installed:
  vim-runtime
Suggested packages:
  lm-sensors ctags vim-doc vim-scripts
The following NEW packages will be installed:
  htop vim vim-runtime
0 upgraded, 3 newly installed, 0 to remove and 38 not upgraded.
2025-08-06 23:07:10,136 p=4866 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:07:10,159 p=4866 u=root n=ansible INFO| TASK [Sistema: Crear usuario administrativo] *******************************************************************************************************************************************
2025-08-06 23:07:10,288 p=4866 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:07:10,305 p=4866 u=root n=ansible INFO| TASK [Nginx: Instalar nginx] ***********************************************************************************************************************************************************
2025-08-06 23:07:12,063 p=4866 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:07:12,081 p=4866 u=root n=ansible INFO| TASK [Nginx: Verificar instalación] ****************************************************************************************************************************************************
2025-08-06 23:07:13,053 p=4866 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:07:13,067 p=4866 u=root n=ansible INFO| TASK [Nginx: Mostrar versión instalada] ************************************************************************************************************************************************
2025-08-06 23:07:13,209 p=4866 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Nginx instalado: "
}
2025-08-06 23:07:13,234 p=4866 u=root n=ansible INFO| TASK [Sistema: Configurar logrotate básico] ********************************************************************************************************************************************
2025-08-06 23:07:15,266 p=4866 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:07:15,289 p=4866 u=root n=ansible INFO| TASK [Red: Configurar UFW si está habilitado] ******************************************************************************************************************************************
2025-08-06 23:07:15,380 p=4866 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:07:15,402 p=4866 u=root n=ansible INFO| TASK [Verificación: Estado del servicio nginx] *****************************************************************************************************************************************
2025-08-06 23:07:17,240 p=4866 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:07:17,266 p=4866 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx está escuchando] *******************************************************************************************************************************
2025-08-06 23:07:18,077 p=4866 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:07:18,114 p=4866 u=root n=ansible INFO| TASK [Info: Mostrar resumen de instalación] ********************************************************************************************************************************************
2025-08-06 23:07:18,228 p=4866 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINSTALACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nNginx Version: \nEstado: Instalado y funcionando\nPuerto: 80 activo\nPróximo paso: Configuración\n=====================================\n"
}
2025-08-06 23:07:18,234 p=4866 u=root n=ansible INFO| PLAY RECAP *****************************************************************************************************************************************************************************
2025-08-06 23:07:18,235 p=4866 u=root n=ansible INFO| web1                       : ok=8    changed=1    unreachable=0    failed=0    skipped=5    rescued=0    ignored=0   
2025-08-06 23:08:50,098 p=5112 u=root n=ansible ERROR| ERROR! conflicting action statements: hosts, tasks

The error appears to be in '/opt/nginx-lab/playbooks/install-nginx.yml': line 4, column 3, but may
be elsewhere in the file depending on the exact syntax problem.

The offending line appears to be:


- name: "Instalación y configuración de Nginx"
  ^ here

2025-08-06 23:10:20,864 p=5138 u=root n=ansible INFO| PLAY [LABORATORIO: Instalación y configuración completa de Nginx] **********************************************************************************************************************
2025-08-06 23:10:20,952 p=5138 u=root n=ansible INFO| TASK [Gathering Facts] *****************************************************************************************************************************************************************
2025-08-06 23:10:24,860 p=5138 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 23:10:24,861 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:10:24,875 p=5138 u=root n=ansible INFO| TASK [Preparación: Mostrar información inicial] ****************************************************************************************************************************************
2025-08-06 23:10:24,996 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-08-06 23:10:25,046 p=5138 u=root n=ansible INFO| TASK [Preparación: Actualizar cache de paquetes] ***************************************************************************************************************************************
2025-08-06 23:10:27,899 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:10:27,922 p=5138 u=root n=ansible INFO| TASK [Debug: Verificar variables cargadas] *********************************************************************************************************************************************
2025-08-06 23:10:28,066 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-08-06 23:10:28,083 p=5138 u=root n=ansible INFO| TASK [Sistema: Configurar timezone] ****************************************************************************************************************************************************
2025-08-06 23:10:28,161 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:10:28,180 p=5138 u=root n=ansible INFO| TASK [Sistema: Instalar paquetes del sistema] ******************************************************************************************************************************************
2025-08-06 23:10:33,897 p=5138 u=root n=ansible INFO| The following additional packages will be installed:
  vim-runtime
Suggested packages:
  lm-sensors ctags vim-doc vim-scripts
The following NEW packages will be installed:
  htop vim vim-runtime
0 upgraded, 3 newly installed, 0 to remove and 38 not upgraded.
2025-08-06 23:10:33,899 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:10:33,913 p=5138 u=root n=ansible INFO| TASK [Sistema: Crear usuario administrativo] *******************************************************************************************************************************************
2025-08-06 23:10:35,839 p=5138 u=root n=ansible INFO| changed: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-08-06 23:10:35,974 p=5138 u=root n=ansible INFO| TASK [Nginx: Instalar nginx] ***********************************************************************************************************************************************************
2025-08-06 23:10:38,820 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:10:38,921 p=5138 u=root n=ansible INFO| TASK [Nginx: Verificar instalación] ****************************************************************************************************************************************************
2025-08-06 23:10:40,399 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:10:40,456 p=5138 u=root n=ansible INFO| TASK [Nginx: Mostrar versión instalada] ************************************************************************************************************************************************
2025-08-06 23:10:40,825 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Nginx instalado: "
}
2025-08-06 23:10:40,957 p=5138 u=root n=ansible INFO| TASK [Sistema: Configurar logrotate básico] ********************************************************************************************************************************************
2025-08-06 23:10:44,848 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:10:44,875 p=5138 u=root n=ansible INFO| TASK [Red: Configurar UFW si está habilitado] ******************************************************************************************************************************************
2025-08-06 23:10:48,018 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:10:48,101 p=5138 u=root n=ansible INFO| TASK [Verificación: Estado del servicio nginx] *****************************************************************************************************************************************
2025-08-06 23:10:50,764 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:10:50,800 p=5138 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx está escuchando] *******************************************************************************************************************************
2025-08-06 23:10:52,565 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:10:52,612 p=5138 u=root n=ansible INFO| TASK [Info: Mostrar resumen de instalación] ********************************************************************************************************************************************
2025-08-06 23:10:52,899 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINSTALACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nNginx Version: \nEstado: Instalado y funcionando\nPuerto: 80 activo\nPróximo paso: Configuración\n=====================================\n"
}
2025-08-06 23:10:53,043 p=5138 u=root n=ansible INFO| TASK [Config: Crear directorios para virtual hosts] ************************************************************************************************************************************
2025-08-06 23:10:55,251 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-available"
 }


2025-08-06 23:10:55,255 p=5138 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-available)
2025-08-06 23:10:57,163 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/sites-enabled"
 }


2025-08-06 23:10:57,170 p=5138 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-enabled)
2025-08-06 23:10:58,884 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/etc/nginx/conf.d"
 }


2025-08-06 23:10:58,890 p=5138 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/conf.d)
2025-08-06 23:10:59,002 p=5138 u=root n=ansible INFO| TASK [Config: Crear directorios de documentos web] *************************************************************************************************************************************
2025-08-06 23:11:00,383 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,5 +1,5 @@[0m
[0;36m[0m {
[0;31m-    "group": 0,[0m
[0;31m[0m[0;31m-    "owner": 0,[0m
[0;31m[0m[0;32m+    "group": 33,[0m
[0;32m[0m[0;32m+    "owner": 33,[0m
[0;32m[0m     "path": "/var/www/html"
 }


2025-08-06 23:11:00,415 p=5138 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:11:01,387 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/var/www/empresa",
[0;31m-    "state": "absent"[0m
[0;31m[0m[0;32m+    "state": "directory"[0m
[0;32m[0m }


2025-08-06 23:11:01,390 p=5138 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:11:01,427 p=5138 u=root n=ansible INFO| TASK [Config: Desplegar configuración principal de nginx] ******************************************************************************************************************************
2025-08-06 23:11:04,319 p=5138 u=root n=ansible INFO| [0;31m--- before: /etc/nginx/nginx.conf[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-5138ilvyzqtm/tmptplq8uki/nginx.conf.j2[0m
[0;32m[0m[0;36m@@ -1,83 +1,59 @@[0m
[0;36m[0m[0;32m+# templates/nginx.conf.j2 - Configuración principal de Nginx[0m
[0;32m[0m[0;32m+# Generado automáticamente por Ansible - NO EDITAR MANUALMENTE[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m user www-data;
[0;31m-worker_processes auto;[0m
[0;31m[0m[0;32m+worker_processes 2;[0m
[0;32m[0m pid /run/nginx.pid;
[0;31m-error_log /var/log/nginx/error.log;[0m
[0;31m[0m[0;31m-include /etc/nginx/modules-enabled/*.conf;[0m
[0;31m[0m 
[0;32m+# CONFIGURACIÓN DE EVENTOS[0m
[0;32m[0m events {
[0;31m-	worker_connections 768;[0m
[0;31m[0m[0;31m-	# multi_accept on;[0m
[0;31m[0m[0;32m+    worker_connections 1024;[0m
[0;32m[0m[0;32m+    use epoll;                             [0m
[0;32m[0m[0;32m+    multi_accept on;                       [0m
[0;32m[0m }
 
[0;32m+# CONFIGURACIÓN HTTP[0m
[0;32m[0m http {
[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Basic Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	sendfile on;[0m
[0;31m[0m[0;31m-	tcp_nopush on;[0m
[0;31m[0m[0;31m-	types_hash_max_size 2048;[0m
[0;31m[0m[0;31m-	# server_tokens off;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# server_names_hash_bucket_size 64;[0m
[0;31m[0m[0;31m-	# server_name_in_redirect off;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	include /etc/nginx/mime.types;[0m
[0;31m[0m[0;31m-	default_type application/octet-stream;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# SSL Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	ssl_protocols TLSv1 TLSv1.1 TLSv1.2 TLSv1.3; # Dropping SSLv3, ref: POODLE[0m
[0;31m[0m[0;31m-	ssl_prefer_server_ciphers on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Logging Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	access_log /var/log/nginx/access.log;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Gzip Settings[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	gzip on;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# gzip_vary on;[0m
[0;31m[0m[0;31m-	# gzip_proxied any;[0m
[0;31m[0m[0;31m-	# gzip_comp_level 6;[0m
[0;31m[0m[0;31m-	# gzip_buffers 16 8k;[0m
[0;31m[0m[0;31m-	# gzip_http_version 1.1;[0m
[0;31m[0m[0;31m-	# gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-	# Virtual Host Configs[0m
[0;31m[0m[0;31m-	##[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	include /etc/nginx/conf.d/*.conf;[0m
[0;31m[0m[0;31m-	include /etc/nginx/sites-enabled/*;[0m
[0;31m[0m[0;31m-}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-#mail {[0m
[0;31m[0m[0;31m-#	# See sample authentication script at:[0m
[0;31m[0m[0;31m-#	# http://wiki.nginx.org/ImapAuthenticateWithApachePhpScript[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	# auth_http localhost/auth.php;[0m
[0;31m[0m[0;31m-#	# pop3_capabilities "TOP" "USER";[0m
[0;31m[0m[0;31m-#	# imap_capabilities "IMAP4rev1" "UIDPLUS";[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:110;[0m
[0;31m[0m[0;31m-#		protocol   pop3;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server {[0m
[0;31m[0m[0;31m-#		listen     localhost:143;[0m
[0;31m[0m[0;31m-#		protocol   imap;[0m
[0;31m[0m[0;31m-#		proxy      on;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#}[0m
[0;31m[0m[0;32m+    # CONFIGURACIÓN BÁSICA[0m
[0;32m[0m[0;32m+    sendfile on;                           [0m
[0;32m[0m[0;32m+    tcp_nopush on;                         [0m
[0;32m[0m[0;32m+    tcp_nodelay on;                        [0m
[0;32m[0m[0;32m+    keepalive_timeout 65;[0m
[0;32m[0m[0;32m+    types_hash_max_size 2048;              [0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE TAMAÑOS[0m
[0;32m[0m[0;32m+    client_max_body_size 10M;[0m
[0;32m[0m[0;32m+    client_body_buffer_size 128k;[0m
[0;32m[0m[0;32m+    client_header_buffer_size 1k;[0m
[0;32m[0m[0;32m+    large_client_header_buffers 4 4k;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # TIPOS MIME[0m
[0;32m[0m[0;32m+    include /etc/nginx/mime.types;[0m
[0;32m[0m[0;32m+    default_type application/octet-stream;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGGING[0m
[0;32m[0m[0;32m+    log_format main '$remote_addr - $remote_user [$time_local] "$request" '[0m
[0;32m[0m[0;32m+                    '$status $body_bytes_sent "$http_referer" '[0m
[0;32m[0m[0;32m+                    '"$http_user_agent" "$http_x_forwarded_for"';[0m
[0;32m[0m[0;32m+                    [0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE COMPRESIÓN[0m
[0;32m[0m[0;32m+    gzip on;[0m
[0;32m[0m[0;32m+    gzip_vary on;[0m
[0;32m[0m[0;32m+    gzip_proxied any;[0m
[0;32m[0m[0;32m+    gzip_comp_level 6;[0m
[0;32m[0m[0;32m+    gzip_types[0m
[0;32m[0m[0;32m+        text/plain[0m
[0;32m[0m[0;32m+        text/css[0m
[0;32m[0m[0;32m+        text/xml[0m
[0;32m[0m[0;32m+        text/javascript[0m
[0;32m[0m[0;32m+        application/javascript[0m
[0;32m[0m[0;32m+        application/xml+rss[0m
[0;32m[0m[0;32m+        application/json;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    # INCLUIR CONFIGURACIONES ADICIONALES[0m
[0;32m[0m[0;32m+    include /etc/nginx/conf.d/*.conf;[0m
[0;32m[0m[0;32m+    include /etc/nginx/sites-enabled/*;[0m
[0;32m[0m

2025-08-06 23:11:04,323 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:04,352 p=5138 u=root n=ansible INFO| TASK [Config: Desplegar configuración de virtual hosts] ********************************************************************************************************************************
2025-08-06 23:11:06,723 p=5138 u=root n=ansible INFO| [0;31m--- before: /etc/nginx/sites-available/default[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-5138ilvyzqtm/tmp4uo0tnv7/default-site.j2[0m
[0;32m[0m[0;36m@@ -1,91 +1,80 @@[0m
[0;36m[0m[0;31m-##[0m
[0;31m[0m[0;31m-# You should look at the following URL's in order to grasp a solid understanding[0m
[0;31m[0m[0;31m-# of Nginx configuration files in order to fully unleash the power of Nginx.[0m
[0;31m[0m[0;31m-# https://www.nginx.com/resources/wiki/start/[0m
[0;31m[0m[0;31m-# https://www.nginx.com/resources/wiki/start/topics/tutorials/config_pitfalls/[0m
[0;31m[0m[0;31m-# https://wiki.debian.org/Nginx/DirectoryStructure[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# In most cases, administrators will remove this file from sites-enabled/ and[0m
[0;31m[0m[0;31m-# leave it as reference inside of sites-available where it will continue to be[0m
[0;31m[0m[0;31m-# updated by the nginx packaging team.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# This file will automatically load configuration files provided by other[0m
[0;31m[0m[0;31m-# applications, such as Drupal or Wordpress. These applications will be made[0m
[0;31m[0m[0;31m-# available underneath a path with that package name, such as /drupal8.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# Please see /usr/share/doc/nginx-doc/examples/ for more detailed examples.[0m
[0;31m[0m[0;31m-##[0m
[0;31m[0m[0;32m+# templates/default-site.j2 - Configuración del sitio por defecto[0m
[0;32m[0m 
[0;31m-# Default server configuration[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;32m+# VIRTUAL HOST: default[0m
[0;32m[0m server {
[0;31m-	listen 80 default_server;[0m
[0;31m[0m[0;31m-	listen [::]:80 default_server;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# SSL configuration[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# listen 443 ssl default_server;[0m
[0;31m[0m[0;31m-	# listen [::]:443 ssl default_server;[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Note: You should disable gzip for SSL traffic.[0m
[0;31m[0m[0;31m-	# See: https://bugs.debian.org/773332[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Read up on ssl_ciphers to ensure a secure configuration.[0m
[0;31m[0m[0;31m-	# See: https://bugs.debian.org/765782[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# Self signed certs generated by the ssl-cert package[0m
[0;31m[0m[0;31m-	# Don't use them in a production server![0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	# include snippets/snakeoil.conf;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	root /var/www/html;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# Add index.php to the list if you are using PHP[0m
[0;31m[0m[0;31m-	index index.html index.htm index.nginx-debian.html;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	server_name _;[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	location / {[0m
[0;31m[0m[0;31m-		# First attempt to serve request as file, then[0m
[0;31m[0m[0;31m-		# as directory, then fall back to displaying a 404.[0m
[0;31m[0m[0;31m-		try_files $uri $uri/ =404;[0m
[0;31m[0m[0;31m-	}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# pass PHP scripts to FastCGI server[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#location ~ \.php$ {[0m
[0;31m[0m[0;31m-	#	include snippets/fastcgi-php.conf;[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#	# With php-fpm (or other unix sockets):[0m
[0;31m[0m[0;31m-	#	fastcgi_pass unix:/run/php/php7.4-fpm.sock;[0m
[0;31m[0m[0;31m-	#	# With php-cgi (or other tcp sockets):[0m
[0;31m[0m[0;31m-	#	fastcgi_pass 127.0.0.1:9000;[0m
[0;31m[0m[0;31m-	#}[0m
[0;31m[0m[0;31m-[0m
[0;31m[0m[0;31m-	# deny access to .htaccess files, if Apache's document root[0m
[0;31m[0m[0;31m-	# concurs with nginx's one[0m
[0;31m[0m[0;31m-	#[0m
[0;31m[0m[0;31m-	#location ~ /\.ht {[0m
[0;31m[0m[0;31m-	#	deny all;[0m
[0;31m[0m[0;31m-	#}[0m
[0;31m[0m[0;31m-}[0m
[0;31m[0m[0;32m+    listen 80;[0m
[0;32m[0m[0;32m+        server_name 10.0.2.15 localhost;[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    root /var/www/html;[0m
[0;32m[0m[0;32m+    index index.html index.htm;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGS ESPECÍFICOS[0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/default_access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/default_error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE UBICACIONES[0m
[0;32m[0m[0;32m+    location / {[0m
[0;32m[0m[0;32m+        try_files $uri $uri/ =404;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # MANEJAR ARCHIVOS ESTÁTICOS[0m
[0;32m[0m[0;32m+    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {[0m
[0;32m[0m[0;32m+        expires 1y;[0m
[0;32m[0m[0;32m+        add_header Cache-Control "public, immutable";[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # OCULTAR INFORMACIÓN SENSIBLE[0m
[0;32m[0m[0;32m+    location ~ /\.ht {[0m
[0;32m[0m[0;32m+        deny all;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # PÁGINA DE ERROR PERSONALIZADA[0m
[0;32m[0m[0;32m+    error_page 404 /404.html;[0m
[0;32m[0m[0;32m+    error_page 500 502 503 504 /50x.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    location = /50x.html {[0m
[0;32m[0m[0;32m+        root /usr/share/nginx/html;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m 
 
[0;31m-# Virtual Host configuration for example.com[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-# You can move that to a different file under sites-available/ and symlink that[0m
[0;31m[0m[0;31m-# to sites-enabled/ to enable it.[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#server {[0m
[0;31m[0m[0;31m-#	listen 80;[0m
[0;31m[0m[0;31m-#	listen [::]:80;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	server_name example.com;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	root /var/www/example.com;[0m
[0;31m[0m[0;31m-#	index index.html;[0m
[0;31m[0m[0;31m-#[0m
[0;31m[0m[0;31m-#	location / {[0m
[0;31m[0m[0;31m-#		try_files $uri $uri/ =404;[0m
[0;31m[0m[0;31m-#	}[0m
[0;31m[0m[0;31m-#}[0m
[0;31m[0m[0;32m+# VIRTUAL HOST: empresa[0m
[0;32m[0m[0;32m+server {[0m
[0;32m[0m[0;32m+    listen 80;[0m
[0;32m[0m[0;32m+        server_name empresa.local;[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+    root /var/www/empresa;[0m
[0;32m[0m[0;32m+    index index.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE LOGS ESPECÍFICOS[0m
[0;32m[0m[0;32m+    access_log /var/log/nginx/empresa_access.log main;[0m
[0;32m[0m[0;32m+    error_log /var/log/nginx/empresa_error.log warn;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # CONFIGURACIÓN DE UBICACIONES[0m
[0;32m[0m[0;32m+    location / {[0m
[0;32m[0m[0;32m+        try_files $uri $uri/ =404;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # MANEJAR ARCHIVOS ESTÁTICOS[0m
[0;32m[0m[0;32m+    location ~* \.(jpg|jpeg|png|gif|ico|css|js)$ {[0m
[0;32m[0m[0;32m+        expires 1y;[0m
[0;32m[0m[0;32m+        add_header Cache-Control "public, immutable";[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # OCULTAR INFORMACIÓN SENSIBLE[0m
[0;32m[0m[0;32m+    location ~ /\.ht {[0m
[0;32m[0m[0;32m+        deny all;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    # PÁGINA DE ERROR PERSONALIZADA[0m
[0;32m[0m[0;32m+    error_page 404 /404.html;[0m
[0;32m[0m[0;32m+    error_page 500 502 503 504 /50x.html;[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    location = /50x.html {[0m
[0;32m[0m[0;32m+        root /usr/share/nginx/html;[0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+    [0m
[0;32m[0m[0;32m+    }[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 23:11:06,725 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:06,773 p=5138 u=root n=ansible INFO| TASK [Config: Eliminar configuración original por defecto] *****************************************************************************************************************************
2025-08-06 23:11:07,498 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,4 +1,4 @@[0m
[0;36m[0m {
     "path": "/etc/nginx/sites-enabled/default",
[0;31m-    "state": "link"[0m
[0;31m[0m[0;32m+    "state": "absent"[0m
[0;32m[0m }


2025-08-06 23:11:07,499 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:07,572 p=5138 u=root n=ansible INFO| TASK [Config: Habilitar sitio personalizado] *******************************************************************************************************************************************
2025-08-06 23:11:08,157 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:11:08,175 p=5138 u=root n=ansible INFO| TASK [Config: Desplegar páginas de inicio personalizadas] ******************************************************************************************************************************
2025-08-06 23:11:09,841 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-5138ilvyzqtm/tmpin2hniq0/index.html.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,111 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="es">[0m
[0;32m[0m[0;32m+<head>[0m
[0;32m[0m[0;32m+    <meta charset="UTF-8">[0m
[0;32m[0m[0;32m+    <meta name="viewport" content="width=device-width, initial-scale=1.0">[0m
[0;32m[0m[0;32m+    <title>Servidor Nginx - laboratorio</title>[0m
[0;32m[0m[0;32m+    <style>[0m
[0;32m[0m[0;32m+        body {[0m
[0;32m[0m[0;32m+            font-family: Arial, sans-serif;[0m
[0;32m[0m[0;32m+            line-height: 1.6;[0m
[0;32m[0m[0;32m+            margin: 0;[0m
[0;32m[0m[0;32m+            padding: 0;[0m
[0;32m[0m[0;32m+            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            min-height: 100vh;[0m
[0;32m[0m[0;32m+            display: flex;[0m
[0;32m[0m[0;32m+            align-items: center;[0m
[0;32m[0m[0;32m+            justify-content: center;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .container {[0m
[0;32m[0m[0;32m+            text-align: center;[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.1);[0m
[0;32m[0m[0;32m+            padding: 2rem;[0m
[0;32m[0m[0;32m+            border-radius: 10px;[0m
[0;32m[0m[0;32m+            backdrop-filter: blur(10px);[0m
[0;32m[0m[0;32m+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[0m
[0;32m[0m[0;32m+            max-width: 600px;[0m
[0;32m[0m[0;32m+            margin: 0 auto;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        h1 {[0m
[0;32m[0m[0;32m+            font-size: 2.5rem;[0m
[0;32m[0m[0;32m+            margin-bottom: 1rem;[0m
[0;32m[0m[0;32m+            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-grid {[0m
[0;32m[0m[0;32m+            display: grid;[0m
[0;32m[0m[0;32m+            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));[0m
[0;32m[0m[0;32m+            gap: 1rem;[0m
[0;32m[0m[0;32m+            margin: 2rem 0;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card {[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.2);[0m
[0;32m[0m[0;32m+            padding: 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 8px;[0m
[0;32m[0m[0;32m+            border: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card h3 {[0m
[0;32m[0m[0;32m+            margin: 0 0 0.5rem 0;[0m
[0;32m[0m[0;32m+            color: #FFD700;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .status {[0m
[0;32m[0m[0;32m+            background: #28a745;[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            padding: 0.5rem 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 20px;[0m
[0;32m[0m[0;32m+            display: inline-block;[0m
[0;32m[0m[0;32m+            margin: 1rem 0;[0m
[0;32m[0m[0;32m+            font-weight: bold;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .footer {[0m
[0;32m[0m[0;32m+            margin-top: 2rem;[0m
[0;32m[0m[0;32m+            padding-top: 1rem;[0m
[0;32m[0m[0;32m+            border-top: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+            font-size: 0.9rem;[0m
[0;32m[0m[0;32m+            opacity: 0.8;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    </style>[0m
[0;32m[0m[0;32m+</head>[0m
[0;32m[0m[0;32m+<body>[0m
[0;32m[0m[0;32m+    <div class="container">[0m
[0;32m[0m[0;32m+        <h1>Servidor Nginx - laboratorio</h1>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="status">[0m
[0;32m[0m[0;32m+            Nginx configurado exitosamente[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="info-grid">[0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Servidor</h3>[0m
[0;32m[0m[0;32m+                <p>aanalizz</p>[0m
[0;32m[0m[0;32m+                <p>10.0.2.15</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Sistema</h3>[0m
[0;32m[0m[0;32m+                <p>Ubuntu 24.04</p>[0m
[0;32m[0m[0;32m+                <p>x86_64</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Nginx</h3>[0m
[0;32m[0m[0;32m+                <p>Workers: 2</p>[0m
[0;32m[0m[0;32m+                <p>Conexiones: 1024</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Red</h3>[0m
[0;32m[0m[0;32m+                <p>HTTP: 80</p>[0m
[0;32m[0m[0;32m+                <p>HTTPS: 443</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="footer">[0m
[0;32m[0m[0;32m+            <p><strong>SFI Networks</strong></p>[0m
[0;32m[0m[0;32m+            <p>Desplegado: 2025-08-06 | Entorno: laboratorio</p>[0m
[0;32m[0m[0;32m+            <p>Administrador: admin@empresa.com</p>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+    </div>[0m
[0;32m[0m[0;32m+</body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 23:11:09,847 p=5138 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:11:11,340 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after: /root/.ansible/tmp/ansible-local-5138ilvyzqtm/tmp54809jrb/index.html.j2[0m
[0;32m[0m[0;36m@@ -0,0 +1,111 @@[0m
[0;36m[0m[0;32m+<!DOCTYPE html>[0m
[0;32m[0m[0;32m+<html lang="es">[0m
[0;32m[0m[0;32m+<head>[0m
[0;32m[0m[0;32m+    <meta charset="UTF-8">[0m
[0;32m[0m[0;32m+    <meta name="viewport" content="width=device-width, initial-scale=1.0">[0m
[0;32m[0m[0;32m+    <title>Servidor Nginx - laboratorio</title>[0m
[0;32m[0m[0;32m+    <style>[0m
[0;32m[0m[0;32m+        body {[0m
[0;32m[0m[0;32m+            font-family: Arial, sans-serif;[0m
[0;32m[0m[0;32m+            line-height: 1.6;[0m
[0;32m[0m[0;32m+            margin: 0;[0m
[0;32m[0m[0;32m+            padding: 0;[0m
[0;32m[0m[0;32m+            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            min-height: 100vh;[0m
[0;32m[0m[0;32m+            display: flex;[0m
[0;32m[0m[0;32m+            align-items: center;[0m
[0;32m[0m[0;32m+            justify-content: center;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .container {[0m
[0;32m[0m[0;32m+            text-align: center;[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.1);[0m
[0;32m[0m[0;32m+            padding: 2rem;[0m
[0;32m[0m[0;32m+            border-radius: 10px;[0m
[0;32m[0m[0;32m+            backdrop-filter: blur(10px);[0m
[0;32m[0m[0;32m+            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);[0m
[0;32m[0m[0;32m+            max-width: 600px;[0m
[0;32m[0m[0;32m+            margin: 0 auto;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        h1 {[0m
[0;32m[0m[0;32m+            font-size: 2.5rem;[0m
[0;32m[0m[0;32m+            margin-bottom: 1rem;[0m
[0;32m[0m[0;32m+            text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-grid {[0m
[0;32m[0m[0;32m+            display: grid;[0m
[0;32m[0m[0;32m+            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));[0m
[0;32m[0m[0;32m+            gap: 1rem;[0m
[0;32m[0m[0;32m+            margin: 2rem 0;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card {[0m
[0;32m[0m[0;32m+            background: rgba(255, 255, 255, 0.2);[0m
[0;32m[0m[0;32m+            padding: 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 8px;[0m
[0;32m[0m[0;32m+            border: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .info-card h3 {[0m
[0;32m[0m[0;32m+            margin: 0 0 0.5rem 0;[0m
[0;32m[0m[0;32m+            color: #FFD700;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .status {[0m
[0;32m[0m[0;32m+            background: #28a745;[0m
[0;32m[0m[0;32m+            color: white;[0m
[0;32m[0m[0;32m+            padding: 0.5rem 1rem;[0m
[0;32m[0m[0;32m+            border-radius: 20px;[0m
[0;32m[0m[0;32m+            display: inline-block;[0m
[0;32m[0m[0;32m+            margin: 1rem 0;[0m
[0;32m[0m[0;32m+            font-weight: bold;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+        .footer {[0m
[0;32m[0m[0;32m+            margin-top: 2rem;[0m
[0;32m[0m[0;32m+            padding-top: 1rem;[0m
[0;32m[0m[0;32m+            border-top: 1px solid rgba(255, 255, 255, 0.3);[0m
[0;32m[0m[0;32m+            font-size: 0.9rem;[0m
[0;32m[0m[0;32m+            opacity: 0.8;[0m
[0;32m[0m[0;32m+        }[0m
[0;32m[0m[0;32m+    </style>[0m
[0;32m[0m[0;32m+</head>[0m
[0;32m[0m[0;32m+<body>[0m
[0;32m[0m[0;32m+    <div class="container">[0m
[0;32m[0m[0;32m+        <h1>Servidor Nginx - laboratorio</h1>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="status">[0m
[0;32m[0m[0;32m+            Nginx configurado exitosamente[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="info-grid">[0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Servidor</h3>[0m
[0;32m[0m[0;32m+                <p>aanalizz</p>[0m
[0;32m[0m[0;32m+                <p>10.0.2.15</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Sistema</h3>[0m
[0;32m[0m[0;32m+                <p>Ubuntu 24.04</p>[0m
[0;32m[0m[0;32m+                <p>x86_64</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Nginx</h3>[0m
[0;32m[0m[0;32m+                <p>Workers: 2</p>[0m
[0;32m[0m[0;32m+                <p>Conexiones: 1024</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+            [0m
[0;32m[0m[0;32m+            <div class="info-card">[0m
[0;32m[0m[0;32m+                <h3>Red</h3>[0m
[0;32m[0m[0;32m+                <p>HTTP: 80</p>[0m
[0;32m[0m[0;32m+                <p>HTTPS: 443</p>[0m
[0;32m[0m[0;32m+            </div>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+        [0m
[0;32m[0m[0;32m+        <div class="footer">[0m
[0;32m[0m[0;32m+            <p><strong>SFI Networks</strong></p>[0m
[0;32m[0m[0;32m+            <p>Desplegado: 2025-08-06 | Entorno: laboratorio</p>[0m
[0;32m[0m[0;32m+            <p>Administrador: admin@empresa.com</p>[0m
[0;32m[0m[0;32m+        </div>[0m
[0;32m[0m[0;32m+    </div>[0m
[0;32m[0m[0;32m+</body>[0m
[0;32m[0m[0;32m+</html>[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m

2025-08-06 23:11:11,357 p=5138 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:11:11,454 p=5138 u=root n=ansible INFO| TASK [Config: Configurar logrotate para nginx] *****************************************************************************************************************************************
2025-08-06 23:11:13,711 p=5138 u=root n=ansible INFO| [0;31m--- before: /etc/logrotate.d/nginx[0m
[0;31m[0m[0;32m+++ after: /opt/nginx-lab/playbooks/files/nginx-logrotate[0m
[0;32m[0m[0;36m@@ -1,18 +1,21 @@[0m
[0;36m[0m[0;32m+# files/nginx-logrotate - Configuración para rotación de logs de nginx[0m
[0;32m[0m[0;32m+[0m
[0;32m[0m /var/log/nginx/*.log {
[0;31m-	daily[0m
[0;31m[0m[0;31m-	missingok[0m
[0;31m[0m[0;31m-	rotate 14[0m
[0;31m[0m[0;31m-	compress[0m
[0;31m[0m[0;31m-	delaycompress[0m
[0;31m[0m[0;31m-	notifempty[0m
[0;31m[0m[0;31m-	create 0640 www-data adm[0m
[0;31m[0m[0;31m-	sharedscripts[0m
[0;31m[0m[0;31m-	prerotate[0m
[0;31m[0m[0;31m-		if [ -d /etc/logrotate.d/httpd-prerotate ]; then \[0m
[0;31m[0m[0;31m-			run-parts /etc/logrotate.d/httpd-prerotate; \[0m
[0;31m[0m[0;31m-		fi \[0m
[0;31m[0m[0;31m-	endscript[0m
[0;31m[0m[0;31m-	postrotate[0m
[0;31m[0m[0;31m-		invoke-rc.d nginx rotate >/dev/null 2>&1[0m
[0;31m[0m[0;31m-	endscript[0m
[0;31m[0m[0;32m+    daily                    [0m
[0;32m[0m[0;32m+    missingok               [0m
[0;32m[0m[0;32m+    rotate 30               [0m
[0;32m[0m[0;32m+    compress                [0m
[0;32m[0m[0;32m+    delaycompress           [0m
[0;32m[0m[0;32m+    notifempty              [0m
[0;32m[0m[0;32m+    create 0644 www-data www-data    [0m
[0;32m[0m[0;32m+    sharedscripts           [0m
[0;32m[0m[0;32m+    prerotate[0m
[0;32m[0m[0;32m+        if [ -d /etc/logrotate.d/httpd-prerotate ]; then \[0m
[0;32m[0m[0;32m+            run-parts /etc/logrotate.d/httpd-prerotate; \[0m
[0;32m[0m[0;32m+        fi \[0m
[0;32m[0m[0;32m+    endscript[0m
[0;32m[0m[0;32m+    postrotate[0m
[0;32m[0m[0;32m+        invoke-rc.d nginx rotate >/dev/null 2>&1 || true[0m
[0;32m[0m[0;32m+    endscript[0m
[0;32m[0m }
[0;32m+[0m
[0;32m[0m

2025-08-06 23:11:13,712 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:13,755 p=5138 u=root n=ansible INFO| TASK [Config: Crear archivos de log si no existen] *************************************************************************************************************************************
2025-08-06 23:11:14,475 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,6 +1,6 @@[0m
[0;36m[0m {
[0;31m-    "atime": 1753882333.6083195,[0m
[0;31m[0m[0;31m-    "mtime": 1753882333.6083195,[0m
[0;31m[0m[0;32m+    "atime": 1754539874.4021912,[0m
[0;32m[0m[0;32m+    "mtime": 1754539874.4021912,[0m
[0;32m[0m     "path": "/var/log/nginx/access.log",
[0;31m-    "state": "file"[0m
[0;31m[0m[0;32m+    "state": "touch"[0m
[0;32m[0m }


2025-08-06 23:11:14,480 p=5138 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/access.log)
2025-08-06 23:11:15,059 p=5138 u=root n=ansible INFO| [0;31m--- before[0m
[0;31m[0m[0;32m+++ after[0m
[0;32m[0m[0;36m@@ -1,6 +1,6 @@[0m
[0;36m[0m {
[0;31m-    "atime": 1753882333.6163385,[0m
[0;31m[0m[0;31m-    "mtime": 1753882333.6163385,[0m
[0;31m[0m[0;32m+    "atime": 1754539874.9814012,[0m
[0;32m[0m[0;32m+    "mtime": 1754539874.9814012,[0m
[0;32m[0m     "path": "/var/log/nginx/error.log",
[0;31m-    "state": "file"[0m
[0;31m[0m[0;32m+    "state": "touch"[0m
[0;32m[0m }


2025-08-06 23:11:15,060 p=5138 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/error.log)
2025-08-06 23:11:15,106 p=5138 u=root n=ansible INFO| TASK [Config: Configurar firewall para HTTP/HTTPS] *************************************************************************************************************************************
2025-08-06 23:11:16,679 p=5138 u=root n=ansible INFO| changed: [web1] => (item=80)
2025-08-06 23:11:17,822 p=5138 u=root n=ansible INFO| changed: [web1] => (item=443)
2025-08-06 23:11:17,840 p=5138 u=root n=ansible INFO| TASK [Verificación: Comprobar sintaxis de nginx] ***************************************************************************************************************************************
2025-08-06 23:11:18,453 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:11:18,495 p=5138 u=root n=ansible INFO| TASK [Verificación: Mostrar resultado de sintaxis] *************************************************************************************************************************************
2025-08-06 23:11:18,646 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "nginx_syntax_check.stderr_lines": []
}
2025-08-06 23:11:18,659 p=5138 u=root n=ansible INFO| TASK [Service: Asegurar que nginx esté iniciado y habilitado] **************************************************************************************************************************
2025-08-06 23:11:19,741 p=5138 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:11:19,780 p=5138 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx responde] **************************************************************************************************************************************
2025-08-06 23:11:19,878 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:11:19,892 p=5138 u=root n=ansible INFO| TASK [Info: Mostrar información de configuración] **************************************************************************************************************************************
2025-08-06 23:11:19,998 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nCONFIGURACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nPuerto HTTP: 80\nPuerto HTTPS: 443\nWorkers: 2\nConexiones por worker: 1024\nVirtual Hosts configurados: 2\n=====================================\n"
}
2025-08-06 23:11:20,034 p=5138 u=root n=ansible INFO| RUNNING HANDLER [restart nginx] ********************************************************************************************************************************************************
2025-08-06 23:11:20,872 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:20,894 p=5138 u=root n=ansible INFO| RUNNING HANDLER [reload nginx] *********************************************************************************************************************************************************
2025-08-06 23:11:22,114 p=5138 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:11:22,134 p=5138 u=root n=ansible INFO| RUNNING HANDLER [validate nginx config] ************************************************************************************************************************************************
2025-08-06 23:11:22,872 p=5138 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:11:22,892 p=5138 u=root n=ansible INFO| TASK [Reporte: Mostrar resumen final] **************************************************************************************************************************************************
2025-08-06 23:11:23,019 p=5138 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nLABORATORIO COMPLETADO\n=====================================\nInstalación: EXITOSA\nConfiguración: EXITOSA\nVerificación: EXITOSA\nServidores configurados: 1\nURLs disponibles:\n- http://10.0.2.15:80\nPróximos pasos:\n1. Acceder a las URLs para verificar\n2. Revisar logs en /var/log/nginx/\n3. Experimentar con configuraciones\n=====================================\n"
}
2025-08-06 23:11:23,024 p=5138 u=root n=ansible INFO| PLAY RECAP *****************************************************************************************************************************************************************************
2025-08-06 23:11:23,025 p=5138 u=root n=ansible INFO| web1                       : ok=28   changed=14   unreachable=0    failed=0    skipped=6    rescued=0    ignored=0   
2025-08-06 23:12:29,988 p=5703 u=root n=ansible INFO| PLAY [LABORATORIO: Instalación y configuración completa de Nginx] **********************************************************************************************************************
2025-08-06 23:12:30,074 p=5703 u=root n=ansible INFO| TASK [Gathering Facts] *****************************************************************************************************************************************************************
2025-08-06 23:12:36,476 p=5703 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 23:12:36,477 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:12:36,493 p=5703 u=root n=ansible INFO| TASK [Preparación: Mostrar información inicial] ****************************************************************************************************************************************
2025-08-06 23:12:36,693 p=5703 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-08-06 23:12:36,736 p=5703 u=root n=ansible INFO| TASK [Preparación: Actualizar cache de paquetes] ***************************************************************************************************************************************
2025-08-06 23:13:08,912 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:13:08,937 p=5703 u=root n=ansible INFO| TASK [Debug: Verificar variables cargadas] *********************************************************************************************************************************************
2025-08-06 23:13:09,076 p=5703 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-08-06 23:13:09,108 p=5703 u=root n=ansible INFO| TASK [Sistema: Configurar timezone] ****************************************************************************************************************************************************
2025-08-06 23:13:09,293 p=5703 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:13:09,335 p=5703 u=root n=ansible INFO| TASK [Sistema: Instalar paquetes del sistema] ******************************************************************************************************************************************
2025-08-06 23:13:50,810 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:13:50,844 p=5703 u=root n=ansible INFO| TASK [Sistema: Crear usuario administrativo] *******************************************************************************************************************************************
2025-08-06 23:13:53,466 p=5703 u=root n=ansible INFO| changed: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-08-06 23:13:53,490 p=5703 u=root n=ansible INFO| TASK [Nginx: Instalar nginx] ***********************************************************************************************************************************************************
2025-08-06 23:13:56,352 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:13:56,367 p=5703 u=root n=ansible INFO| TASK [Nginx: Verificar instalación] ****************************************************************************************************************************************************
2025-08-06 23:13:57,325 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:13:57,344 p=5703 u=root n=ansible INFO| TASK [Nginx: Mostrar versión instalada] ************************************************************************************************************************************************
2025-08-06 23:13:57,436 p=5703 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Nginx instalado: nginx version: nginx/1.24.0 (Ubuntu)"
}
2025-08-06 23:13:57,455 p=5703 u=root n=ansible INFO| TASK [Sistema: Configurar logrotate básico] ********************************************************************************************************************************************
2025-08-06 23:13:59,965 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:13:59,982 p=5703 u=root n=ansible INFO| TASK [Red: Configurar UFW si está habilitado] ******************************************************************************************************************************************
2025-08-06 23:14:02,585 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:14:02,620 p=5703 u=root n=ansible INFO| TASK [Verificación: Estado del servicio nginx] *****************************************************************************************************************************************
2025-08-06 23:14:04,595 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:14:04,613 p=5703 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx está escuchando] *******************************************************************************************************************************
2025-08-06 23:14:10,595 p=5703 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:14:10,630 p=5703 u=root n=ansible INFO| TASK [Info: Mostrar resumen de instalación] ********************************************************************************************************************************************
2025-08-06 23:14:10,699 p=5703 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINSTALACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nNginx Version: nginx version: nginx/1.24.0 (Ubuntu)\nEstado: Instalado y funcionando\nPuerto: 80 activo\nPróximo paso: Configuración\n=====================================\n"
}
2025-08-06 23:14:10,756 p=5703 u=root n=ansible INFO| TASK [Config: Crear directorios para virtual hosts] ************************************************************************************************************************************
2025-08-06 23:14:11,802 p=5703 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-available)
2025-08-06 23:14:12,430 p=5703 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/sites-enabled)
2025-08-06 23:14:13,047 p=5703 u=root n=ansible INFO| changed: [web1] => (item=/etc/nginx/conf.d)
2025-08-06 23:14:13,071 p=5703 u=root n=ansible INFO| TASK [Config: Crear directorios de documentos web] *************************************************************************************************************************************
2025-08-06 23:14:13,818 p=5703 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:14:14,406 p=5703 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:14:14,441 p=5703 u=root n=ansible INFO| TASK [Config: Desplegar configuración principal de nginx] ******************************************************************************************************************************
2025-08-06 23:14:16,807 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:14:16,835 p=5703 u=root n=ansible INFO| TASK [Config: Desplegar configuración de virtual hosts] ********************************************************************************************************************************
2025-08-06 23:14:18,604 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:14:18,625 p=5703 u=root n=ansible INFO| TASK [Config: Eliminar configuración original por defecto] *****************************************************************************************************************************
2025-08-06 23:14:19,277 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:14:19,312 p=5703 u=root n=ansible INFO| TASK [Config: Habilitar sitio personalizado] *******************************************************************************************************************************************
2025-08-06 23:14:19,947 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:14:19,964 p=5703 u=root n=ansible INFO| TASK [Config: Desplegar páginas de inicio personalizadas] ******************************************************************************************************************************
2025-08-06 23:14:21,603 p=5703 u=root n=ansible INFO| changed: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:14:23,188 p=5703 u=root n=ansible INFO| changed: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:14:23,262 p=5703 u=root n=ansible INFO| TASK [Config: Configurar logrotate para nginx] *****************************************************************************************************************************************
2025-08-06 23:14:24,908 p=5703 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:14:24,928 p=5703 u=root n=ansible INFO| TASK [Config: Crear archivos de log si no existen] *************************************************************************************************************************************
2025-08-06 23:14:25,599 p=5703 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/access.log)
2025-08-06 23:14:26,288 p=5703 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/error.log)
2025-08-06 23:14:26,338 p=5703 u=root n=ansible INFO| TASK [Config: Configurar firewall para HTTP/HTTPS] *************************************************************************************************************************************
2025-08-06 23:14:28,844 p=5703 u=root n=ansible INFO| changed: [web1] => (item=80)
2025-08-06 23:14:32,120 p=5703 u=root n=ansible INFO| changed: [web1] => (item=443)
2025-08-06 23:14:32,208 p=5703 u=root n=ansible INFO| TASK [Verificación: Comprobar sintaxis de nginx] ***************************************************************************************************************************************
2025-08-06 23:14:33,020 p=5703 u=root n=ansible INFO| fatal: [web1]: FAILED! => {"changed": false, "cmd": ["nginx", "-t"], "delta": "0:00:00.054211", "end": "2025-08-06 23:14:32.939428", "failed_when_result": true, "msg": "non-zero return code", "rc": 1, "start": "2025-08-06 23:14:32.885217", "stderr": "2025/08/06 23:14:32 [emerg] 7016#7016: unexpected end of file, expecting \"}\" in /etc/nginx/nginx.conf:60\nnginx: configuration file /etc/nginx/nginx.conf test failed", "stderr_lines": ["2025/08/06 23:14:32 [emerg] 7016#7016: unexpected end of file, expecting \"}\" in /etc/nginx/nginx.conf:60", "nginx: configuration file /etc/nginx/nginx.conf test failed"], "stdout": "", "stdout_lines": []}
2025-08-06 23:14:33,028 p=5703 u=root n=ansible INFO| PLAY RECAP *****************************************************************************************************************************************************************************
2025-08-06 23:14:33,030 p=5703 u=root n=ansible INFO| web1                       : ok=24   changed=13   unreachable=0    failed=1    skipped=1    rescued=0    ignored=0   
2025-08-06 23:21:12,345 p=7131 u=root n=ansible INFO| PLAY [LABORATORIO: Instalación y configuración completa de Nginx] **********************************************************************************************************************
2025-08-06 23:21:12,484 p=7131 u=root n=ansible INFO| TASK [Gathering Facts] *****************************************************************************************************************************************************************
2025-08-06 23:21:16,413 p=7131 u=root n=ansible WARNING| [WARNING]: Platform linux on host web1 is using the discovered Python interpreter at /usr/bin/python3.12, but future installation of another Python interpreter could change the
meaning of that path. See https://docs.ansible.com/ansible-core/2.18/reference_appendices/interpreter_discovery.html for more information.

2025-08-06 23:21:16,414 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:16,431 p=7131 u=root n=ansible INFO| TASK [Preparación: Mostrar información inicial] ****************************************************************************************************************************************
2025-08-06 23:21:16,531 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINICIO DEL LABORATORIO NGINX\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nSistema: Ubuntu 24.04\nEntorno: laboratorio\n=====================================\n"
}
2025-08-06 23:21:16,547 p=7131 u=root n=ansible INFO| TASK [Preparación: Actualizar cache de paquetes] ***************************************************************************************************************************************
2025-08-06 23:21:18,538 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:18,567 p=7131 u=root n=ansible INFO| TASK [Debug: Verificar variables cargadas] *********************************************************************************************************************************************
2025-08-06 23:21:18,672 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Variables del sistema:\n- system_packages: ['curl', 'wget', 'unzip', 'vim', 'htop', 'tree']\n- environment_name: laboratorio\n- timezone: America/Lima\n"
}
2025-08-06 23:21:18,687 p=7131 u=root n=ansible INFO| TASK [Sistema: Configurar timezone] ****************************************************************************************************************************************************
2025-08-06 23:21:18,804 p=7131 u=root n=ansible INFO| skipping: [web1]
2025-08-06 23:21:18,871 p=7131 u=root n=ansible INFO| TASK [Sistema: Instalar paquetes del sistema] ******************************************************************************************************************************************
2025-08-06 23:21:21,174 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:21,187 p=7131 u=root n=ansible INFO| TASK [Sistema: Crear usuario administrativo] *******************************************************************************************************************************************
2025-08-06 23:21:22,432 p=7131 u=root n=ansible INFO| ok: [web1] => (item={'name': 'devops', 'comment': 'Usuario DevOps', 'groups': 'sudo', 'shell': '/bin/bash'})
2025-08-06 23:21:22,451 p=7131 u=root n=ansible INFO| TASK [Nginx: Instalar nginx] ***********************************************************************************************************************************************************
2025-08-06 23:21:24,642 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:24,665 p=7131 u=root n=ansible INFO| TASK [Nginx: Verificar instalación] ****************************************************************************************************************************************************
2025-08-06 23:21:25,381 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:25,395 p=7131 u=root n=ansible INFO| TASK [Nginx: Mostrar versión instalada] ************************************************************************************************************************************************
2025-08-06 23:21:25,542 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "Nginx instalado: nginx version: nginx/1.24.0 (Ubuntu)"
}
2025-08-06 23:21:25,566 p=7131 u=root n=ansible INFO| TASK [Sistema: Configurar logrotate básico] ********************************************************************************************************************************************
2025-08-06 23:21:27,929 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:27,948 p=7131 u=root n=ansible INFO| TASK [Red: Configurar UFW si está habilitado] ******************************************************************************************************************************************
2025-08-06 23:21:30,189 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:30,205 p=7131 u=root n=ansible INFO| TASK [Verificación: Estado del servicio nginx] *****************************************************************************************************************************************
2025-08-06 23:21:31,923 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:31,964 p=7131 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx está escuchando] *******************************************************************************************************************************
2025-08-06 23:21:37,841 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:37,870 p=7131 u=root n=ansible INFO| TASK [Info: Mostrar resumen de instalación] ********************************************************************************************************************************************
2025-08-06 23:21:37,972 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nINSTALACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nNginx Version: nginx version: nginx/1.24.0 (Ubuntu)\nEstado: Instalado y funcionando\nPuerto: 80 activo\nPróximo paso: Configuración\n=====================================\n"
}
2025-08-06 23:21:37,987 p=7131 u=root n=ansible INFO| TASK [Config: Crear directorios para virtual hosts] ************************************************************************************************************************************
2025-08-06 23:21:39,130 p=7131 u=root n=ansible INFO| ok: [web1] => (item=/etc/nginx/sites-available)
2025-08-06 23:21:39,846 p=7131 u=root n=ansible INFO| ok: [web1] => (item=/etc/nginx/sites-enabled)
2025-08-06 23:21:40,447 p=7131 u=root n=ansible INFO| ok: [web1] => (item=/etc/nginx/conf.d)
2025-08-06 23:21:40,474 p=7131 u=root n=ansible INFO| TASK [Config: Crear directorios de documentos web] *************************************************************************************************************************************
2025-08-06 23:21:41,226 p=7131 u=root n=ansible INFO| ok: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:21:41,832 p=7131 u=root n=ansible INFO| ok: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:21:41,879 p=7131 u=root n=ansible INFO| TASK [Config: Desplegar configuración principal de nginx] ******************************************************************************************************************************
2025-08-06 23:21:44,122 p=7131 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:21:44,143 p=7131 u=root n=ansible INFO| TASK [Config: Desplegar configuración de virtual hosts] ********************************************************************************************************************************
2025-08-06 23:21:45,982 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:46,004 p=7131 u=root n=ansible INFO| TASK [Config: Eliminar configuración original por defecto] *****************************************************************************************************************************
2025-08-06 23:21:47,047 p=7131 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:21:47,065 p=7131 u=root n=ansible INFO| TASK [Config: Habilitar sitio personalizado] *******************************************************************************************************************************************
2025-08-06 23:21:47,744 p=7131 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:21:47,781 p=7131 u=root n=ansible INFO| TASK [Config: Desplegar páginas de inicio personalizadas] ******************************************************************************************************************************
2025-08-06 23:21:50,160 p=7131 u=root n=ansible INFO| ok: [web1] => (item={'name': 'default', 'server_name': '10.0.2.15', 'document_root': '/var/www/html', 'index_files': 'index.html index.htm'})
2025-08-06 23:21:52,900 p=7131 u=root n=ansible INFO| ok: [web1] => (item={'name': 'empresa', 'server_name': 'empresa.local', 'document_root': '/var/www/empresa', 'index_files': 'index.html'})
2025-08-06 23:21:52,933 p=7131 u=root n=ansible INFO| TASK [Config: Configurar logrotate para nginx] *****************************************************************************************************************************************
2025-08-06 23:21:55,699 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:21:55,727 p=7131 u=root n=ansible INFO| TASK [Config: Crear archivos de log si no existen] *************************************************************************************************************************************
2025-08-06 23:21:56,907 p=7131 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/access.log)
2025-08-06 23:21:57,776 p=7131 u=root n=ansible INFO| changed: [web1] => (item=/var/log/nginx/error.log)
2025-08-06 23:21:57,807 p=7131 u=root n=ansible INFO| TASK [Config: Configurar firewall para HTTP/HTTPS] *************************************************************************************************************************************
2025-08-06 23:22:00,428 p=7131 u=root n=ansible INFO| ok: [web1] => (item=80)
2025-08-06 23:22:03,222 p=7131 u=root n=ansible INFO| ok: [web1] => (item=443)
2025-08-06 23:22:03,344 p=7131 u=root n=ansible INFO| TASK [Verificación: Comprobar sintaxis de nginx] ***************************************************************************************************************************************
2025-08-06 23:22:04,786 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:22:04,809 p=7131 u=root n=ansible INFO| TASK [Verificación: Mostrar resultado de sintaxis] *************************************************************************************************************************************
2025-08-06 23:22:04,984 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "nginx_syntax_check.stderr_lines": [
        "nginx: the configuration file /etc/nginx/nginx.conf syntax is ok",
        "nginx: configuration file /etc/nginx/nginx.conf test is successful"
    ]
}
2025-08-06 23:22:05,065 p=7131 u=root n=ansible INFO| TASK [Service: Asegurar que nginx esté iniciado y habilitado] **************************************************************************************************************************
2025-08-06 23:22:06,979 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:22:07,034 p=7131 u=root n=ansible INFO| TASK [Verificación: Comprobar que nginx responde] **************************************************************************************************************************************
2025-08-06 23:22:09,206 p=7131 u=root n=ansible INFO| ok: [web1 -> localhost]
2025-08-06 23:22:09,220 p=7131 u=root n=ansible INFO| TASK [Info: Mostrar información de configuración] **************************************************************************************************************************************
2025-08-06 23:22:09,462 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nCONFIGURACIÓN COMPLETADA\n=====================================\nHost: aanalizz\nIP: 10.0.2.15\nPuerto HTTP: 80\nPuerto HTTPS: 443\nWorkers: 2\nConexiones por worker: 1024\nVirtual Hosts configurados: 2\n=====================================\n"
}
2025-08-06 23:22:09,633 p=7131 u=root n=ansible INFO| RUNNING HANDLER [restart nginx] ********************************************************************************************************************************************************
2025-08-06 23:22:11,683 p=7131 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:22:11,727 p=7131 u=root n=ansible INFO| RUNNING HANDLER [reload nginx] *********************************************************************************************************************************************************
2025-08-06 23:22:13,191 p=7131 u=root n=ansible INFO| changed: [web1]
2025-08-06 23:22:13,214 p=7131 u=root n=ansible INFO| RUNNING HANDLER [validate nginx config] ************************************************************************************************************************************************
2025-08-06 23:22:14,007 p=7131 u=root n=ansible INFO| ok: [web1]
2025-08-06 23:22:14,027 p=7131 u=root n=ansible INFO| TASK [Reporte: Mostrar resumen final] **************************************************************************************************************************************************
2025-08-06 23:22:14,264 p=7131 u=root n=ansible INFO| ok: [web1] => {
    "msg": "=====================================\nLABORATORIO COMPLETADO\n=====================================\nInstalación: EXITOSA\nConfiguración: EXITOSA\nVerificación: EXITOSA\nServidores configurados: 1\nURLs disponibles:\n- http://10.0.2.15:80\nPróximos pasos:\n1. Acceder a las URLs para verificar\n2. Revisar logs en /var/log/nginx/\n3. Experimentar con configuraciones\n=====================================\n"
}
2025-08-06 23:22:14,272 p=7131 u=root n=ansible INFO| PLAY RECAP *****************************************************************************************************************************************************************************
2025-08-06 23:22:14,273 p=7131 u=root n=ansible INFO| web1                       : ok=33   changed=6    unreachable=0    failed=0    skipped=1    rescued=0    ignored=0   
